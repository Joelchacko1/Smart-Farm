<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Farm - Your Complete Farming Solution</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            box-sizing: border-box;
        }
        .feature-card {
            transition: all 0.3s ease;
        }
        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .coin-animation {
            animation: bounce 2s infinite;
        }
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }
        .page-content {
            display: none;
        }
        .page-content.active {
            display: block;
        }
        .nav-link {
            transition: all 0.3s ease;
        }
        .nav-link:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }
        .nav-link.active {
            background-color: rgba(255, 255, 255, 0.2);
        }
        .upload-area {
            transition: all 0.3s ease;
        }
        .upload-area:hover {
            border-color: #10b981;
            background-color: #f0fdf4;
        }
        .upload-area.dragover {
            border-color: #10b981;
            background-color: #f0fdf4;
            transform: scale(1.02);
        }
        .modal {
            backdrop-filter: blur(4px);
        }
        .progress-bar {
            transition: width 0.3s ease;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Header -->
    <header class="gradient-bg text-white shadow-lg">
        <div class="container mx-auto px-4 py-6">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-3">
                    <div class="text-3xl">🌱</div>
                    <h1 class="text-2xl font-bold cursor-pointer" onclick="showPage('home')">Smart Farm</h1>
                </div>
                <div class="flex items-center space-x-4">
                    <select class="bg-white text-gray-800 px-3 py-2 rounded-lg border-none outline-none">
                        <option>English</option>
                        <option>हिंदी</option>
                        <option>తెలుగు</option>
                        <option>தமிழ்</option>
                        <option>বাংলা</option>
                    </select>
                    <div class="flex items-center space-x-2 bg-yellow-400 text-gray-800 px-3 py-2 rounded-lg">
                        <span class="coin-animation">🪙</span>
                        <span class="font-semibold" id="coinBalance">1,250</span>
                    </div>
                    <div class="w-10 h-10 bg-white rounded-full flex items-center justify-center text-gray-800 font-semibold">
                        👤
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="bg-white shadow-md sticky top-0 z-40">
        <div class="container mx-auto px-4">
            <div class="flex space-x-1 overflow-x-auto py-2">
                <button onclick="showPage('home')" class="nav-link px-4 py-2 rounded-lg text-gray-700 hover:bg-gray-100 whitespace-nowrap active">🏠 Home</button>
                <button onclick="showPage('soil-schemes')" class="nav-link px-4 py-2 rounded-lg text-gray-700 hover:bg-gray-100 whitespace-nowrap">🌡️ Soil & Schemes</button>
                <button onclick="showPage('videos')" class="nav-link px-4 py-2 rounded-lg text-gray-700 hover:bg-gray-100 whitespace-nowrap">📹 Learning Hub</button>
                <button onclick="showPage('marketplace')" class="nav-link px-4 py-2 rounded-lg text-gray-700 hover:bg-gray-100 whitespace-nowrap">🛒 Marketplace</button>
                <button onclick="showPage('farm-visits')" class="nav-link px-4 py-2 rounded-lg text-gray-700 hover:bg-gray-100 whitespace-nowrap">🚜 Farm Visits</button>
                <button onclick="showPage('news-notifications')" class="nav-link px-4 py-2 rounded-lg text-gray-700 hover:bg-gray-100 whitespace-nowrap">📰 News & Alerts</button>
            </div>
        </div>
    </nav>

    <!-- Home Page -->
    <div id="home" class="page-content active">
        <!-- Welcome Section -->
        <section class="container mx-auto px-4 py-8">
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold text-gray-800 mb-4">Welcome to Your Smart Farm Dashboard</h2>
                <p class="text-gray-600 max-w-2xl mx-auto">From soil analysis to market prices, everything you need to grow smarter and earn better. Join thousands of farmers already using Smart Farm!</p>
            </div>
        </section>

        <!-- Main Dashboard -->
        <main class="container mx-auto px-4 pb-12">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                
                <!-- Soil Analysis & Government Schemes -->
                <div class="feature-card bg-white rounded-xl shadow-lg p-6 cursor-pointer" onclick="showPage('soil-schemes')">
                    <div class="text-4xl mb-4">🌡️</div>
                    <h3 class="text-xl font-semibold text-gray-800 mb-2">Soil Analysis & Government Schemes</h3>
                    <p class="text-gray-600 text-sm mb-4">Upload soil reports, get crop suggestions, weather updates, and discover government subsidies and policies.</p>
                    <div class="flex space-x-2">
                        <div class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-xs">AI Powered</div>
                        <div class="bg-orange-100 text-orange-800 px-3 py-1 rounded-full text-xs">Subsidies</div>
                    </div>
                </div>

                <!-- Videos & Learning -->
                <div class="feature-card bg-white rounded-xl shadow-lg p-6 cursor-pointer" onclick="showPage('videos')">
                    <div class="text-4xl mb-4">📹</div>
                    <h3 class="text-xl font-semibold text-gray-800 mb-2">Learning Hub</h3>
                    <p class="text-gray-600 text-sm mb-4">Watch farming videos, share your knowledge, upload content, and earn coins for quality contributions.</p>
                    <div class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-xs inline-block">Earn Coins</div>
                </div>

                <!-- Marketplace & Mandi Prices -->
                <div class="feature-card bg-white rounded-xl shadow-lg p-6 cursor-pointer" onclick="showPage('marketplace')">
                    <div class="text-4xl mb-4">🛒</div>
                    <h3 class="text-xl font-semibold text-gray-800 mb-2">Marketplace & Mandi Prices</h3>
                    <p class="text-gray-600 text-sm mb-4">Buy/sell crops, fertilizers, livestock, equipment and check real-time market prices for better decisions.</p>
                    <div class="flex space-x-2">
                        <div class="bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-xs">Trading</div>
                        <div class="bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-xs">Live Prices</div>
                    </div>
                </div>

                <!-- Farm Visits -->
                <div class="feature-card bg-white rounded-xl shadow-lg p-6 cursor-pointer" onclick="showPage('farm-visits')">
                    <div class="text-4xl mb-4">🚜</div>
                    <h3 class="text-xl font-semibold text-gray-800 mb-2">Farm Visits</h3>
                    <p class="text-gray-600 text-sm mb-4">Open your farm for visitors or explore other farms. Learn through agro-tourism and earn from farm experiences.</p>
                    <div class="bg-teal-100 text-teal-800 px-3 py-1 rounded-full text-xs inline-block">Agro-Tourism</div>
                </div>

                <!-- News & Notifications -->
                <div class="feature-card bg-white rounded-xl shadow-lg p-6 cursor-pointer" onclick="showPage('news-notifications')">
                    <div class="text-4xl mb-4">📰</div>
                    <h3 class="text-xl font-semibold text-gray-800 mb-2">News & Notifications</h3>
                    <p class="text-gray-600 text-sm mb-4">Stay updated with agriculture news, policy alerts, weather warnings, and important farming updates.</p>
                    <div class="flex space-x-2">
                        <div class="bg-indigo-100 text-indigo-800 px-3 py-1 rounded-full text-xs">Live Updates</div>
                        <div class="bg-red-100 text-red-800 px-3 py-1 rounded-full text-xs" id="notificationBadge">3 New</div>
                    </div>
                </div>
            </div>

            <!-- Quick Stats -->
            <div class="mt-12 grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="bg-gradient-to-r from-green-400 to-green-600 text-white rounded-xl p-6 text-center">
                    <div class="text-3xl font-bold">15,000+</div>
                    <div class="text-green-100">Active Farmers</div>
                </div>
                <div class="bg-gradient-to-r from-blue-400 to-blue-600 text-white rounded-xl p-6 text-center">
                    <div class="text-3xl font-bold">₹2.5Cr+</div>
                    <div class="text-blue-100">Transactions</div>
                </div>
                <div class="bg-gradient-to-r from-purple-400 to-purple-600 text-white rounded-xl p-6 text-center">
                    <div class="text-3xl font-bold">500+</div>
                    <div class="text-purple-100">Learning Videos</div>
                </div>
            </div>
        </main>
    </div>

    <!-- Soil Analysis & Government Schemes Page -->
    <div id="soil-schemes" class="page-content">
        <div class="container mx-auto px-4 py-8">
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold text-gray-800 mb-4">🌡️ Soil Analysis & Government Schemes</h2>
                <p class="text-gray-600">Get AI-powered soil recommendations and discover government support programs</p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- Soil Analysis Section -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h3 class="text-xl font-semibold text-gray-800 mb-6">🧪 Soil Health Dashboard</h3>
                    
                    <!-- Summary Cards -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8">
                        <div class="bg-gradient-to-br from-blue-400 to-blue-600 text-white rounded-lg p-4">
                            <div class="flex items-center justify-between mb-2">
                                <span class="text-2xl">💧</span>
                                <span class="bg-white bg-opacity-20 px-2 py-1 rounded text-xs">Good</span>
                            </div>
                            <h4 class="font-semibold mb-1">Moisture</h4>
                            <div class="text-2xl font-bold">45%</div>
                            <div class="text-blue-100 text-sm">Optimal range: 40-60%</div>
                        </div>

                        <div class="bg-gradient-to-br from-green-400 to-green-600 text-white rounded-lg p-4">
                            <div class="flex items-center justify-between mb-2">
                                <span class="text-2xl">⚖️</span>
                                <span class="bg-white bg-opacity-20 px-2 py-1 rounded text-xs">Good</span>
                            </div>
                            <h4 class="font-semibold mb-1">pH Level</h4>
                            <div class="text-2xl font-bold">6.8</div>
                            <div class="text-green-100 text-sm">Slightly acidic</div>
                        </div>

                        <div class="bg-gradient-to-br from-yellow-400 to-yellow-600 text-white rounded-lg p-4">
                            <div class="flex items-center justify-between mb-2">
                                <span class="text-2xl">⚡</span>
                                <span class="bg-white bg-opacity-20 px-2 py-1 rounded text-xs">Moderate</span>
                            </div>
                            <h4 class="font-semibold mb-1">Conductivity</h4>
                            <div class="text-2xl font-bold">2.1</div>
                            <div class="text-yellow-100 text-sm">dS/m</div>
                        </div>

                        <div class="bg-gradient-to-br from-purple-400 to-purple-600 text-white rounded-lg p-4">
                            <div class="flex items-center justify-between mb-2">
                                <span class="text-2xl">🌱</span>
                                <span class="bg-white bg-opacity-20 px-2 py-1 rounded text-xs">Low</span>
                            </div>
                            <h4 class="font-semibold mb-1">Organic Matter</h4>
                            <div class="text-2xl font-bold">1.8%</div>
                            <div class="text-purple-100 text-sm">Needs improvement</div>
                        </div>
                    </div>

                    <!-- Nutrient Analysis -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                        <!-- Primary Nutrients -->
                        <div class="bg-gray-50 rounded-lg p-4">
                            <h4 class="font-semibold text-gray-800 mb-4">🔴 Primary Nutrients (NPK)</h4>
                            <div class="space-y-4">
                                <div>
                                    <div class="flex justify-between items-center mb-2">
                                        <span class="font-medium">Nitrogen (N)</span>
                                        <span class="text-sm text-gray-600">280 mg/kg</span>
                                    </div>
                                    <div class="w-full bg-gray-200 rounded-full h-2 mb-1">
                                        <div class="bg-red-500 h-2 rounded-full" style="width: 70%"></div>
                                    </div>
                                    <p class="text-xs text-gray-600">Promotes leaf growth and chlorophyll production</p>
                                </div>

                                <div>
                                    <div class="flex justify-between items-center mb-2">
                                        <span class="font-medium">Phosphorus (P)</span>
                                        <span class="text-sm text-gray-600">45 mg/kg</span>
                                    </div>
                                    <div class="w-full bg-gray-200 rounded-full h-2 mb-1">
                                        <div class="bg-orange-500 h-2 rounded-full" style="width: 45%"></div>
                                    </div>
                                    <p class="text-xs text-gray-600">Essential for root development and flowering</p>
                                </div>

                                <div>
                                    <div class="flex justify-between items-center mb-2">
                                        <span class="font-medium">Potassium (K)</span>
                                        <span class="text-sm text-gray-600">320 mg/kg</span>
                                    </div>
                                    <div class="w-full bg-gray-200 rounded-full h-2 mb-1">
                                        <div class="bg-green-500 h-2 rounded-full" style="width: 80%"></div>
                                    </div>
                                    <p class="text-xs text-gray-600">Improves disease resistance and water regulation</p>
                                </div>
                            </div>
                        </div>

                        <!-- Secondary Nutrients -->
                        <div class="bg-gray-50 rounded-lg p-4">
                            <h4 class="font-semibold text-gray-800 mb-4">🟡 Secondary Nutrients</h4>
                            <div class="space-y-4">
                                <div>
                                    <div class="flex justify-between items-center mb-2">
                                        <span class="font-medium">Calcium (Ca)</span>
                                        <span class="text-sm text-gray-600">1850 mg/kg</span>
                                    </div>
                                    <div class="w-full bg-gray-200 rounded-full h-2 mb-1">
                                        <div class="bg-blue-500 h-2 rounded-full" style="width: 85%"></div>
                                    </div>
                                    <p class="text-xs text-gray-600">Strengthens cell walls and improves soil structure</p>
                                </div>

                                <div>
                                    <div class="flex justify-between items-center mb-2">
                                        <span class="font-medium">Magnesium (Mg)</span>
                                        <span class="text-sm text-gray-600">180 mg/kg</span>
                                    </div>
                                    <div class="w-full bg-gray-200 rounded-full h-2 mb-1">
                                        <div class="bg-teal-500 h-2 rounded-full" style="width: 60%"></div>
                                    </div>
                                    <p class="text-xs text-gray-600">Central component of chlorophyll molecule</p>
                                </div>

                                <div>
                                    <div class="flex justify-between items-center mb-2">
                                        <span class="font-medium">Sulfur (S)</span>
                                        <span class="text-sm text-gray-600">25 mg/kg</span>
                                    </div>
                                    <div class="w-full bg-gray-200 rounded-full h-2 mb-1">
                                        <div class="bg-yellow-500 h-2 rounded-full" style="width: 40%"></div>
                                    </div>
                                    <p class="text-xs text-gray-600">Important for protein synthesis and oil formation</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Pathogenicity Alert -->
                    <div class="bg-red-50 border-l-4 border-red-500 p-4 mb-6">
                        <div class="flex items-center">
                            <span class="text-2xl mr-3">⚠️</span>
                            <div class="flex-1">
                                <h4 class="font-semibold text-red-800">Pathogenicity Alert</h4>
                                <p class="text-red-700 text-sm mt-1">
                                    <strong>Pathogen Count:</strong> 2.3 × 10⁵ CFU/g soil
                                </p>
                                <p class="text-red-700 text-sm mt-1">
                                    <strong>Recommendation:</strong> Apply bio-fungicide treatment before planting. Consider soil sterilization for sensitive crops.
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- Weather Integration -->
                    <div class="bg-blue-50 rounded-lg p-4 mb-6">
                        <h4 class="font-semibold text-blue-800 mb-3">🌤️ Current Weather Conditions</h4>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div class="text-center">
                                <span class="text-3xl">☀️</span>
                                <div class="font-bold text-blue-800">28°C</div>
                                <div class="text-sm text-blue-600">Temperature</div>
                            </div>
                            <div class="text-center">
                                <span class="text-3xl">💧</span>
                                <div class="font-bold text-blue-800">65%</div>
                                <div class="text-sm text-blue-600">Humidity</div>
                            </div>
                            <div class="text-center">
                                <span class="text-3xl">🌬️</span>
                                <div class="font-bold text-blue-800">12 km/h</div>
                                <div class="text-sm text-blue-600">Wind Speed</div>
                            </div>
                        </div>
                    </div>

                    <!-- Crop Recommendation System -->
                    <div class="bg-green-50 rounded-lg p-4 mb-6">
                        <h4 class="font-semibold text-green-800 mb-4">🌾 Smart Crop Recommendations</h4>
                        
                        <div class="mb-4">
                            <label class="block text-sm font-medium text-green-800 mb-2">Select Desired Crop:</label>
                            <select id="cropSelect" class="w-full border border-green-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500">
                                <option value="">Choose a crop...</option>
                                <option value="wheat">🌾 Wheat</option>
                                <option value="rice">🌾 Rice</option>
                                <option value="corn">🌽 Corn</option>
                                <option value="potato">🥔 Potato</option>
                                <option value="tomato">🍅 Tomato</option>
                                <option value="cotton">🌿 Cotton</option>
                                <option value="sugarcane">🎋 Sugarcane</option>
                            </select>
                        </div>

                        <div id="cropRecommendation" class="hidden">
                            <div class="bg-white rounded-lg p-4 border border-green-200">
                                <h5 class="font-semibold text-green-800 mb-2">Soil Modifications Required:</h5>
                                <div id="modifications" class="space-y-2 mb-4">
                                    <!-- Dynamic content will be inserted here -->
                                </div>
                                <button class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700">Get Detailed Plan</button>
                            </div>
                        </div>

                        <div class="mt-4">
                            <h5 class="font-semibold text-green-800 mb-3">🌤️ Weather-Based Crop Recommendations:</h5>
                            <div class="bg-white rounded-lg p-4 border border-green-200 mb-4">
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                                    <div class="bg-green-100 text-green-800 p-3 rounded-lg text-center">
                                        <div class="text-2xl mb-1">🌾</div>
                                        <div class="font-semibold">Wheat</div>
                                        <div class="text-xs">Ideal for current weather</div>
                                        <div class="text-xs mt-1">Temp: Perfect | Humidity: Good</div>
                                    </div>
                                    <div class="bg-yellow-100 text-yellow-800 p-3 rounded-lg text-center">
                                        <div class="text-2xl mb-1">🥔</div>
                                        <div class="font-semibold">Potato</div>
                                        <div class="text-xs">Good conditions</div>
                                        <div class="text-xs mt-1">Temp: Good | Humidity: Perfect</div>
                                    </div>
                                    <div class="bg-blue-100 text-blue-800 p-3 rounded-lg text-center">
                                        <div class="text-2xl mb-1">🌽</div>
                                        <div class="font-semibold">Corn</div>
                                        <div class="text-xs">Moderate suitability</div>
                                        <div class="text-xs mt-1">Temp: High | Humidity: Moderate</div>
                                    </div>
                                </div>
                            </div>

                            <h5 class="font-semibold text-green-800 mb-3">🧪 Soil Report-Based Crop Recommendations:</h5>
                            <div class="bg-white rounded-lg p-4 border border-green-200">
                                <div class="space-y-3">
                                    <div class="flex items-center justify-between p-3 bg-green-50 rounded-lg border-l-4 border-green-500">
                                        <div class="flex items-center space-x-3">
                                            <span class="text-2xl">🌾</span>
                                            <div>
                                                <div class="font-semibold text-green-800">Wheat</div>
                                                <div class="text-xs text-green-600">Excellent match for your soil conditions</div>
                                            </div>
                                        </div>
                                        <div class="text-right">
                                            <div class="bg-green-200 text-green-800 px-2 py-1 rounded text-xs font-semibold">95% Match</div>
                                            <div class="text-xs text-green-600 mt-1">pH: ✓ NPK: ✓ Moisture: ✓</div>
                                        </div>
                                    </div>

                                    <div class="flex items-center justify-between p-3 bg-blue-50 rounded-lg border-l-4 border-blue-500">
                                        <div class="flex items-center space-x-3">
                                            <span class="text-2xl">🥔</span>
                                            <div>
                                                <div class="font-semibold text-blue-800">Potato</div>
                                                <div class="text-xs text-blue-600">Good soil compatibility</div>
                                            </div>
                                        </div>
                                        <div class="text-right">
                                            <div class="bg-blue-200 text-blue-800 px-2 py-1 rounded text-xs font-semibold">88% Match</div>
                                            <div class="text-xs text-blue-600 mt-1">pH: ✓ Organic: ⚠️ Moisture: ✓</div>
                                        </div>
                                    </div>

                                    <div class="flex items-center justify-between p-3 bg-yellow-50 rounded-lg border-l-4 border-yellow-500">
                                        <div class="flex items-center space-x-3">
                                            <span class="text-2xl">🍅</span>
                                            <div>
                                                <div class="font-semibold text-yellow-800">Tomato</div>
                                                <div class="text-xs text-yellow-600">Requires soil amendments</div>
                                            </div>
                                        </div>
                                        <div class="text-right">
                                            <div class="bg-yellow-200 text-yellow-800 px-2 py-1 rounded text-xs font-semibold">72% Match</div>
                                            <div class="text-xs text-yellow-600 mt-1">pH: ✓ P: ⚠️ Pathogen: ❌</div>
                                        </div>
                                    </div>

                                    <div class="flex items-center justify-between p-3 bg-red-50 rounded-lg border-l-4 border-red-500">
                                        <div class="flex items-center space-x-3">
                                            <span class="text-2xl">🌾</span>
                                            <div>
                                                <div class="font-semibold text-red-800">Rice</div>
                                                <div class="text-xs text-red-600">Not recommended for current soil</div>
                                            </div>
                                        </div>
                                        <div class="text-right">
                                            <div class="bg-red-200 text-red-800 px-2 py-1 rounded text-xs font-semibold">45% Match</div>
                                            <div class="text-xs text-red-600 mt-1">Moisture: ❌ Pathogen: ❌</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="mt-4 p-3 bg-gray-50 rounded-lg">
                                    <h6 class="font-semibold text-gray-800 mb-2">🎯 Combined Weather + Soil Recommendation:</h6>
                                    <div class="bg-gradient-to-r from-green-100 to-blue-100 p-3 rounded-lg border-2 border-green-300">
                                        <div class="flex items-center space-x-3">
                                            <span class="text-3xl">🌾</span>
                                            <div>
                                                <div class="font-bold text-green-800">WHEAT is your BEST choice!</div>
                                                <div class="text-sm text-green-700">Perfect weather conditions + Excellent soil match = Maximum yield potential</div>
                                                <div class="text-xs text-green-600 mt-1">Expected yield: 45-50 quintals/acre | Profit margin: High</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- File Upload Section -->
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <h4 class="font-semibold text-blue-800 mb-2">📄 Upload New Soil Report</h4>
                        <div class="border-2 border-dashed border-blue-300 rounded-lg p-8 text-center">
                            <div class="text-4xl mb-2">📄</div>
                            <p class="text-blue-600 mb-3">Drag & drop your soil analysis report or click to browse</p>
                            <button class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">Choose File</button>
                            <p class="text-xs text-blue-500 mt-2">Supported formats: PDF, JPG, PNG (Max 5MB)</p>
                        </div>
                    </div>
                </div>

                <!-- Government Schemes Section -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h3 class="text-xl font-semibold text-gray-800 mb-4">🏛️ Government Schemes</h3>
                    
                    <div class="space-y-4">
                        <div class="bg-blue-50 border-l-4 border-blue-400 p-4">
                            <h4 class="font-semibold text-blue-800">PM-KISAN Scheme</h4>
                            <p class="text-sm text-blue-700 mt-1 mb-2">Direct income support of ₹6,000 per year to farmer families</p>
                            <div class="flex space-x-2">
                                <button class="bg-blue-600 text-white px-3 py-1 rounded text-sm">Check Eligibility</button>
                                <button class="bg-blue-100 text-blue-800 px-3 py-1 rounded text-sm">Apply Now</button>
                            </div>
                        </div>
                        
                        <div class="bg-green-50 border-l-4 border-green-400 p-4">
                            <h4 class="font-semibold text-green-800">Soil Health Card Scheme</h4>
                            <p class="text-sm text-green-700 mt-1 mb-2">Free soil testing and nutrient management recommendations</p>
                            <div class="flex space-x-2">
                                <button class="bg-green-600 text-white px-3 py-1 rounded text-sm">Apply Now</button>
                                <button class="bg-green-100 text-green-800 px-3 py-1 rounded text-sm">Learn More</button>
                            </div>
                        </div>
                        
                        <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4">
                            <h4 class="font-semibold text-yellow-800">Crop Insurance Scheme</h4>
                            <p class="text-sm text-yellow-700 mt-1 mb-2">Protection against crop loss due to natural calamities</p>
                            <div class="flex space-x-2">
                                <button class="bg-yellow-600 text-white px-3 py-1 rounded text-sm">Get Quote</button>
                                <button class="bg-yellow-100 text-yellow-800 px-3 py-1 rounded text-sm">Learn More</button>
                            </div>
                        </div>

                        <div class="bg-purple-50 border-l-4 border-purple-400 p-4">
                            <h4 class="font-semibold text-purple-800">Solar Pump Subsidy</h4>
                            <p class="text-sm text-purple-700 mt-1 mb-2">Up to 90% subsidy on solar water pumps for irrigation</p>
                            <div class="flex space-x-2">
                                <button class="bg-purple-600 text-white px-3 py-1 rounded text-sm">Check Eligibility</button>
                                <button class="bg-purple-100 text-purple-800 px-3 py-1 rounded text-sm">Apply</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Learning Hub Page -->
    <div id="videos" class="page-content">
        <div class="container mx-auto px-4 py-8">
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold text-gray-800 mb-4">📹 Learning Hub</h2>
                <p class="text-gray-600">Watch, learn, share, and earn coins through agricultural knowledge</p>
            </div>

            <div class="flex justify-between items-center mb-6">
                <div class="flex space-x-4">
                    <button onclick="openVideoUpload()" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center space-x-2">
                        <span>📹</span>
                        <span>Upload Video</span>
                    </button>
                    <button onclick="openBlogEditor()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2">
                        <span>✍️</span>
                        <span>Write Blog</span>
                    </button>
                </div>
                <div class="flex items-center space-x-2 bg-yellow-100 text-yellow-800 px-4 py-2 rounded-lg">
                    <span>🪙</span>
                    <span class="font-semibold">Total Earned: 450 coins</span>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <div class="bg-white rounded-lg shadow-lg overflow-hidden">
                    <div class="bg-gray-200 h-48 flex items-center justify-center">
                        <span class="text-6xl">🎥</span>
                    </div>
                    <div class="p-4">
                        <h4 class="font-semibold mb-2">Organic Farming Techniques</h4>
                        <p class="text-sm text-gray-600 mb-3">Learn sustainable farming methods that improve soil health and crop yield</p>
                        <div class="flex justify-between items-center text-xs text-gray-500 mb-3">
                            <span>👀 1.2K views</span>
                            <span>👍 89 likes</span>
                            <span>🪙 +50 coins</span>
                        </div>
                        <button class="w-full bg-green-600 text-white py-2 rounded hover:bg-green-700">Watch Now</button>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow-lg overflow-hidden">
                    <div class="bg-gray-200 h-48 flex items-center justify-center">
                        <span class="text-6xl">🎥</span>
                    </div>
                    <div class="p-4">
                        <h4 class="font-semibold mb-2">Poultry Care Basics</h4>
                        <p class="text-sm text-gray-600 mb-3">Essential tips for maintaining healthy chickens and maximizing egg production</p>
                        <div class="flex justify-between items-center text-xs text-gray-500 mb-3">
                            <span>👀 856 views</span>
                            <span>👍 67 likes</span>
                            <span>🪙 +35 coins</span>
                        </div>
                        <button class="w-full bg-green-600 text-white py-2 rounded hover:bg-green-700">Watch Now</button>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow-lg overflow-hidden">
                    <div class="bg-gray-200 h-48 flex items-center justify-center">
                        <span class="text-6xl">🎥</span>
                    </div>
                    <div class="p-4">
                        <h4 class="font-semibold mb-2">Aquaculture Setup Guide</h4>
                        <p class="text-sm text-gray-600 mb-3">Complete guide to setting up fish farming for beginners</p>
                        <div class="flex justify-between items-center text-xs text-gray-500 mb-3">
                            <span>👀 642 views</span>
                            <span>👍 45 likes</span>
                            <span>🪙 +28 coins</span>
                        </div>
                        <button class="w-full bg-green-600 text-white py-2 rounded hover:bg-green-700">Watch Now</button>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow-lg overflow-hidden">
                    <div class="bg-gray-200 h-48 flex items-center justify-center">
                        <span class="text-6xl">📝</span>
                    </div>
                    <div class="p-4">
                        <h4 class="font-semibold mb-2">Crop Rotation Benefits</h4>
                        <p class="text-sm text-gray-600 mb-3">Blog post about improving soil fertility through proper crop rotation</p>
                        <div class="flex justify-between items-center text-xs text-gray-500 mb-3">
                            <span>👀 423 reads</span>
                            <span>👍 32 likes</span>
                            <span>🪙 +20 coins</span>
                        </div>
                        <button class="w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700">Read Article</button>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow-lg overflow-hidden">
                    <div class="bg-gray-200 h-48 flex items-center justify-center">
                        <span class="text-6xl">🎥</span>
                    </div>
                    <div class="p-4">
                        <h4 class="font-semibold mb-2">Cattle Breeding Techniques</h4>
                        <p class="text-sm text-gray-600 mb-3">Advanced breeding methods for improving cattle genetics</p>
                        <div class="flex justify-between items-center text-xs text-gray-500 mb-3">
                            <span>👀 789 views</span>
                            <span>👍 56 likes</span>
                            <span>🪙 +42 coins</span>
                        </div>
                        <button class="w-full bg-green-600 text-white py-2 rounded hover:bg-green-700">Watch Now</button>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow-lg overflow-hidden">
                    <div class="bg-gray-200 h-48 flex items-center justify-center">
                        <span class="text-6xl">🎥</span>
                    </div>
                    <div class="p-4">
                        <h4 class="font-semibold mb-2">Hydroponic Farming Setup</h4>
                        <p class="text-sm text-gray-600 mb-3">Modern soilless farming techniques for urban agriculture</p>
                        <div class="flex justify-between items-center text-xs text-gray-500 mb-3">
                            <span>👀 1.5K views</span>
                            <span>👍 112 likes</span>
                            <span>🪙 +65 coins</span>
                        </div>
                        <button class="w-full bg-green-600 text-white py-2 rounded hover:bg-green-700">Watch Now</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Video Upload Modal -->
    <div id="videoUploadModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 modal">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
                <div class="p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-2xl font-bold text-gray-800">📹 Upload Video</h3>
                        <button onclick="closeVideoUpload()" class="text-gray-500 hover:text-gray-700 text-2xl">×</button>
                    </div>

                    <form id="videoUploadForm" class="space-y-6">
                        <!-- Video Upload Area -->
                        <div class="upload-area border-2 border-dashed border-green-300 rounded-lg p-8 text-center cursor-pointer" onclick="document.getElementById('videoFile').click()">
                            <div class="text-6xl mb-4">🎥</div>
                            <h4 class="text-lg font-semibold text-gray-800 mb-2">Upload Your Video</h4>
                            <p class="text-gray-600 mb-4">Drag & drop your video file or click to browse</p>
                            <button type="button" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700">Choose Video File</button>
                            <p class="text-xs text-gray-500 mt-2">Supported formats: MP4, AVI, MOV (Max 100MB)</p>
                            <input type="file" id="videoFile" class="hidden" accept="video/*" onchange="handleVideoSelect(event)">
                        </div>

                        <!-- Video Preview -->
                        <div id="videoPreview" class="hidden">
                            <div class="bg-gray-100 rounded-lg p-4">
                                <div class="flex items-center space-x-3">
                                    <span class="text-2xl">🎬</span>
                                    <div>
                                        <div class="font-semibold text-gray-800" id="videoFileName"></div>
                                        <div class="text-sm text-gray-600" id="videoFileSize"></div>
                                    </div>
                                </div>
                                <div class="mt-3">
                                    <div class="bg-gray-200 rounded-full h-2">
                                        <div id="uploadProgress" class="bg-green-500 h-2 rounded-full progress-bar" style="width: 0%"></div>
                                    </div>
                                    <div class="text-xs text-gray-600 mt-1" id="uploadStatus">Ready to upload</div>
                                </div>
                            </div>
                        </div>

                        <!-- Video Details -->
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Video Title *</label>
                                <input type="text" id="videoTitle" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500" placeholder="Enter a descriptive title for your video" required>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Description</label>
                                <textarea id="videoDescription" rows="4" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500" placeholder="Describe what viewers will learn from your video..."></textarea>
                            </div>

                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Category *</label>
                                    <select id="videoCategory" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500" required>
                                        <option value="">Select category</option>
                                        <option value="crop-cultivation">🌾 Crop Cultivation</option>
                                        <option value="livestock">🐄 Livestock Management</option>
                                        <option value="organic-farming">🌱 Organic Farming</option>
                                        <option value="equipment">🚜 Equipment & Tools</option>
                                        <option value="pest-control">🐛 Pest Control</option>
                                        <option value="irrigation">💧 Irrigation</option>
                                        <option value="harvesting">🌾 Harvesting</option>
                                        <option value="marketing">💰 Marketing</option>
                                    </select>
                                </div>

                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Language</label>
                                    <select id="videoLanguage" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500">
                                        <option value="english">English</option>
                                        <option value="hindi">हिंदी</option>
                                        <option value="telugu">తెలుగు</option>
                                        <option value="tamil">தமிழ்</option>
                                        <option value="bengali">বাংলা</option>
                                        <option value="marathi">मराठी</option>
                                        <option value="gujarati">ગુજરાતી</option>
                                    </select>
                                </div>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Tags (comma separated)</label>
                                <input type="text" id="videoTags" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500" placeholder="farming, organic, tips, beginner">
                            </div>

                            <!-- Thumbnail Upload -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Custom Thumbnail (Optional)</label>
                                <div class="border-2 border-dashed border-gray-300 rounded-lg p-4 text-center cursor-pointer hover:border-green-400" onclick="document.getElementById('thumbnailFile').click()">
                                    <span class="text-2xl">🖼️</span>
                                    <p class="text-sm text-gray-600 mt-1">Upload custom thumbnail (JPG, PNG)</p>
                                    <input type="file" id="thumbnailFile" class="hidden" accept="image/*" onchange="handleThumbnailSelect(event)">
                                </div>
                                <div id="thumbnailPreview" class="hidden mt-2">
                                    <div class="flex items-center space-x-2">
                                        <span class="text-sm">📷</span>
                                        <span class="text-sm text-gray-600" id="thumbnailName"></span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Coin Reward Info -->
                        <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
                            <div class="flex items-center space-x-2 mb-2">
                                <span class="text-2xl">🪙</span>
                                <h4 class="font-semibold text-yellow-800">Earn Coins for Your Video!</h4>
                            </div>
                            <div class="text-sm text-yellow-700 space-y-1">
                                <p>• Base reward: 25 coins for approved video</p>
                                <p>• Quality bonus: Up to 50 extra coins for high-quality content</p>
                                <p>• View rewards: 1 coin per 100 views</p>
                                <p>• Like rewards: 2 coins per like received</p>
                            </div>
                        </div>

                        <!-- Submit Buttons -->
                        <div class="flex space-x-4">
                            <button type="button" onclick="uploadVideo()" class="flex-1 bg-green-600 text-white py-3 rounded-lg hover:bg-green-700 font-semibold">
                                Upload Video
                            </button>
                            <button type="button" onclick="saveAsDraft()" class="px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50">
                                Save as Draft
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Sell Product Modal -->
    <div id="sellProductModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 modal">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
                <div class="p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-2xl font-bold text-gray-800">🛒 Sell Your Product</h3>
                        <button onclick="closeSellProduct()" class="text-gray-500 hover:text-gray-700 text-2xl">×</button>
                    </div>

                    <form id="sellProductForm" class="space-y-6">
                        <!-- Product Images Upload -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Product Images *</label>
                            <div class="upload-area border-2 border-dashed border-green-300 rounded-lg p-6 text-center cursor-pointer" onclick="document.getElementById('productImages').click()">
                                <div class="text-4xl mb-2">📷</div>
                                <h4 class="text-lg font-semibold text-gray-800 mb-2">Upload Product Images</h4>
                                <p class="text-gray-600 mb-4">Add multiple photos of your product</p>
                                <button type="button" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700">Choose Images</button>
                                <p class="text-xs text-gray-500 mt-2">JPG, PNG (Max 5MB each, up to 5 images)</p>
                                <input type="file" id="productImages" class="hidden" accept="image/*" multiple onchange="handleProductImages(event)">
                            </div>
                            <div id="imagePreviewContainer" class="hidden mt-3">
                                <div class="grid grid-cols-2 md:grid-cols-3 gap-3" id="imagePreviewGrid"></div>
                            </div>
                        </div>

                        <!-- Product Details -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Product Name *</label>
                                <input type="text" id="productName" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500" placeholder="Enter product name" required>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Category *</label>
                                <select id="productCategory" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500" required>
                                    <option value="">Select category</option>
                                    <option value="seeds">🌾 Seeds</option>
                                    <option value="fertilizers">🧪 Fertilizers</option>
                                    <option value="tools">🔧 Tools & Equipment</option>
                                    <option value="organic">🌱 Organic Products</option>
                                </select>
                            </div>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Description *</label>
                            <textarea id="productDescription" rows="4" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500" placeholder="Describe your product, its benefits, and usage instructions..." required></textarea>
                        </div>

                        <!-- Quantity and Pricing -->
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Available Quantity *</label>
                                <input type="number" id="productQuantity" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500" placeholder="100" min="1" required>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Unit *</label>
                                <select id="productUnit" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500" required>
                                    <option value="">Select unit</option>
                                    <option value="kg">Kg</option>
                                    <option value="bags">Bags</option>
                                    <option value="liters">Liters</option>
                                    <option value="pieces">Pieces</option>
                                    <option value="packets">Packets</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Price per Unit (₹) *</label>
                                <input type="number" id="productPrice" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500" placeholder="2250" min="1" required>
                            </div>
                        </div>

                        <!-- Location -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">State *</label>
                                <select id="productState" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500" required>
                                    <option value="">Select state</option>
                                    <option value="maharashtra">Maharashtra</option>
                                    <option value="punjab">Punjab</option>
                                    <option value="uttar-pradesh">Uttar Pradesh</option>
                                    <option value="karnataka">Karnataka</option>
                                    <option value="tamil-nadu">Tamil Nadu</option>
                                    <option value="gujarat">Gujarat</option>
                                    <option value="rajasthan">Rajasthan</option>
                                    <option value="andhra-pradesh">Andhra Pradesh</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">City/District *</label>
                                <input type="text" id="productCity" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500" placeholder="Enter city or district" required>
                            </div>
                        </div>

                        <!-- Contact Information -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Contact Number *</label>
                                <input type="tel" id="contactNumber" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500" placeholder="+91 9876543210" required>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Preferred Contact Time</label>
                                <select id="contactTime" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500">
                                    <option value="anytime">Anytime</option>
                                    <option value="morning">Morning (6 AM - 12 PM)</option>
                                    <option value="afternoon">Afternoon (12 PM - 6 PM)</option>
                                    <option value="evening">Evening (6 PM - 10 PM)</option>
                                </select>
                            </div>
                        </div>

                        <!-- Coin Reward Info -->
                        <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                            <div class="flex items-center space-x-2 mb-2">
                                <span class="text-2xl">🪙</span>
                                <h4 class="font-semibold text-green-800">Earn Coins for Selling!</h4>
                            </div>
                            <div class="text-sm text-green-700 space-y-1">
                                <p>• Listing reward: 10 coins for approved product</p>
                                <p>• Sale commission: 2% of sale value in coins</p>
                                <p>• Quality bonus: Up to 25 extra coins for detailed listings</p>
                                <p>• Review bonus: 5 coins per positive buyer review</p>
                            </div>
                        </div>

                        <!-- Submit Buttons -->
                        <div class="flex space-x-4">
                            <button type="button" onclick="submitProduct()" class="flex-1 bg-green-600 text-white py-3 rounded-lg hover:bg-green-700 font-semibold">
                                List Product
                            </button>
                            <button type="button" onclick="saveProductDraft()" class="px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50">
                                Save Draft
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- My Orders Modal -->
    <div id="myOrdersModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 modal">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">
                <div class="p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-2xl font-bold text-gray-800">📦 My Orders</h3>
                        <button onclick="closeMyOrders()" class="text-gray-500 hover:text-gray-700 text-2xl">×</button>
                    </div>

                    <div class="space-y-6">
                        <!-- Recommended Orders from Soil Analysis -->
                        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                            <h4 class="font-semibold text-blue-800 mb-3">🧪 Recommended Based on Your Soil Analysis</h4>
                            <div class="space-y-3">
                                <div class="bg-white rounded-lg p-4 border border-blue-200">
                                    <div class="flex justify-between items-start">
                                        <div class="flex space-x-3">
                                            <span class="text-2xl">🧪</span>
                                            <div>
                                                <h5 class="font-semibold">Phosphorus Fertilizer (DAP)</h5>
                                                <p class="text-sm text-gray-600">Recommended for your soil's low phosphorus levels</p>
                                                <p class="text-xs text-blue-600 mt-1">Quantity needed: 50kg for 1 acre</p>
                                            </div>
                                        </div>
                                        <div class="text-right">
                                            <div class="font-bold text-green-600">₹1,850</div>
                                            <button class="bg-blue-600 text-white px-3 py-1 rounded text-sm mt-1 hover:bg-blue-700">Order Now</button>
                                        </div>
                                    </div>
                                </div>

                                <div class="bg-white rounded-lg p-4 border border-blue-200">
                                    <div class="flex justify-between items-start">
                                        <div class="flex space-x-3">
                                            <span class="text-2xl">🌾</span>
                                            <div>
                                                <h5 class="font-semibold">Premium Wheat Seeds</h5>
                                                <p class="text-sm text-gray-600">Perfect match for your soil conditions (95% compatibility)</p>
                                                <p class="text-xs text-blue-600 mt-1">Quantity needed: 50kg for 1 acre</p>
                                            </div>
                                        </div>
                                        <div class="text-right">
                                            <div class="font-bold text-green-600">₹2,250</div>
                                            <button class="bg-blue-600 text-white px-3 py-1 rounded text-sm mt-1 hover:bg-blue-700">Order Now</button>
                                        </div>
                                    </div>
                                </div>

                                <div class="bg-white rounded-lg p-4 border border-blue-200">
                                    <div class="flex justify-between items-start">
                                        <div class="flex space-x-3">
                                            <span class="text-2xl">🍃</span>
                                            <div>
                                                <h5 class="font-semibold">Organic Compost</h5>
                                                <p class="text-sm text-gray-600">To improve your soil's organic matter content</p>
                                                <p class="text-xs text-blue-600 mt-1">Quantity needed: 500kg for 1 acre</p>
                                            </div>
                                        </div>
                                        <div class="text-right">
                                            <div class="font-bold text-green-600">₹3,000</div>
                                            <button class="bg-blue-600 text-white px-3 py-1 rounded text-sm mt-1 hover:bg-blue-700">Order Now</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Current Orders -->
                        <div>
                            <h4 class="font-semibold text-gray-800 mb-3">📋 Current Orders</h4>
                            <div class="space-y-3">
                                <div class="bg-white border rounded-lg p-4">
                                    <div class="flex justify-between items-start mb-3">
                                        <div>
                                            <h5 class="font-semibold">Order #ORD-2024-001</h5>
                                            <p class="text-sm text-gray-600">Placed on March 15, 2024</p>
                                        </div>
                                        <span class="bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-sm">Processing</span>
                                    </div>
                                    <div class="space-y-2">
                                        <div class="flex justify-between items-center">
                                            <span>🌾 Premium Wheat Seeds - 50kg</span>
                                            <span class="font-semibold">₹2,250</span>
                                        </div>
                                        <div class="flex justify-between items-center">
                                            <span>🧪 NPK Fertilizer - 25kg</span>
                                            <span class="font-semibold">₹850</span>
                                        </div>
                                    </div>
                                    <div class="border-t pt-2 mt-2">
                                        <div class="flex justify-between items-center font-semibold">
                                            <span>Total Amount:</span>
                                            <span class="text-green-600">₹3,100</span>
                                        </div>
                                    </div>
                                </div>

                                <div class="bg-white border rounded-lg p-4">
                                    <div class="flex justify-between items-start mb-3">
                                        <div>
                                            <h5 class="font-semibold">Order #ORD-2024-002</h5>
                                            <p class="text-sm text-gray-600">Placed on March 12, 2024</p>
                                        </div>
                                        <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm">Delivered</span>
                                    </div>
                                    <div class="space-y-2">
                                        <div class="flex justify-between items-center">
                                            <span>🍃 Vermicompost - 40kg</span>
                                            <span class="font-semibold">₹600</span>
                                        </div>
                                    </div>
                                    <div class="border-t pt-2 mt-2">
                                        <div class="flex justify-between items-center font-semibold">
                                            <span>Total Amount:</span>
                                            <span class="text-green-600">₹600</span>
                                        </div>
                                        <button class="bg-blue-600 text-white px-4 py-2 rounded mt-2 hover:bg-blue-700">Rate & Review</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Cart Modal -->
    <div id="cartModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 modal">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
                <div class="p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-2xl font-bold text-gray-800">🛒 Shopping Cart</h3>
                        <button onclick="closeCart()" class="text-gray-500 hover:text-gray-700 text-2xl">×</button>
                    </div>

                    <div id="cartItems" class="space-y-4">
                        <!-- Cart items will be populated here -->
                    </div>

                    <div id="cartEmpty" class="text-center py-8 hidden">
                        <span class="text-6xl">🛒</span>
                        <h4 class="text-xl font-semibold text-gray-800 mt-4">Your cart is empty</h4>
                        <p class="text-gray-600 mt-2">Add some products to get started!</p>
                    </div>

                    <div id="cartSummary" class="border-t pt-4 mt-6 hidden">
                        <div class="space-y-2">
                            <div class="flex justify-between">
                                <span>Subtotal:</span>
                                <span id="cartSubtotal">₹0</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Shipping:</span>
                                <span id="cartShipping">₹100</span>
                            </div>
                            <div class="flex justify-between font-bold text-lg">
                                <span>Total:</span>
                                <span id="cartTotal" class="text-green-600">₹0</span>
                            </div>
                        </div>
                        <button onclick="proceedToCheckout()" class="w-full bg-green-600 text-white py-3 rounded-lg hover:bg-green-700 font-semibold mt-4">
                            Proceed to Checkout
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Buy Now Modal -->
    <div id="buyNowModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 modal">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
                <div class="p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-2xl font-bold text-gray-800">🛍️ Buy Product</h3>
                        <button onclick="closeBuyNow()" class="text-gray-500 hover:text-gray-700 text-2xl">×</button>
                    </div>

                    <div id="buyNowContent">
                        <!-- Product details will be populated here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- List My Farm Modal -->
    <div id="listMyFarmModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 modal">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">
                <div class="p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-2xl font-bold text-gray-800">🚜 List My Farm for Visits</h3>
                        <button onclick="closeListMyFarm()" class="text-gray-500 hover:text-gray-700 text-2xl">×</button>
                    </div>

                    <form id="listFarmForm" class="space-y-6">
                        <!-- Farm Images Upload -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Farm Images *</label>
                            <div class="upload-area border-2 border-dashed border-green-300 rounded-lg p-6 text-center cursor-pointer" onclick="document.getElementById('farmImages').click()">
                                <div class="text-4xl mb-2">📷</div>
                                <h4 class="text-lg font-semibold text-gray-800 mb-2">Upload Farm Images</h4>
                                <p class="text-gray-600 mb-4">Add multiple photos of your farm, crops, and facilities</p>
                                <button type="button" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700">Choose Images</button>
                                <p class="text-xs text-gray-500 mt-2">JPG, PNG (Max 5MB each, up to 8 images)</p>
                                <input type="file" id="farmImages" class="hidden" accept="image/*" multiple onchange="handleFarmImages(event)">
                            </div>
                            <div id="farmImagePreviewContainer" class="hidden mt-3">
                                <div class="grid grid-cols-2 md:grid-cols-4 gap-3" id="farmImagePreviewGrid"></div>
                            </div>
                        </div>

                        <!-- Farmer Details -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Farmer Name *</label>
                                <input type="text" id="farmerName" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500" placeholder="Enter farmer's full name" required>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Farm Name *</label>
                                <input type="text" id="farmName" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500" placeholder="Enter farm name" required>
                            </div>
                        </div>

                        <!-- Farm Address -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Complete Farm Address *</label>
                            <textarea id="farmAddress" rows="3" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500" placeholder="Enter complete address with landmarks..." required></textarea>
                        </div>

                        <!-- Farm Details -->
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Total Land Area *</label>
                                <input type="number" id="landArea" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500" placeholder="5" min="0.1" step="0.1" required>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Area Unit *</label>
                                <select id="areaUnit" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500" required>
                                    <option value="">Select unit</option>
                                    <option value="acres">Acres</option>
                                    <option value="hectares">Hectares</option>
                                    <option value="bigha">Bigha</option>
                                    <option value="katha">Katha</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Farm Type *</label>
                                <select id="farmType" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500" required>
                                    <option value="">Select type</option>
                                    <option value="organic">🌱 Organic Farm</option>
                                    <option value="dairy">🐄 Dairy Farm</option>
                                    <option value="poultry">🐔 Poultry Farm</option>
                                    <option value="aquaculture">🐟 Aquaculture</option>
                                    <option value="mixed">🌾 Mixed Farming</option>
                                    <option value="hydroponic">🥬 Hydroponic</option>
                                    <option value="fruit">🍎 Fruit Orchard</option>
                                    <option value="vegetable">🥕 Vegetable Farm</option>
                                </select>
                            </div>
                        </div>

                        <!-- Farm Description -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Farm Description *</label>
                            <textarea id="farmDescription" rows="4" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500" placeholder="Describe your farm, what visitors can learn, activities available, crops grown, etc..." required></textarea>
                        </div>

                        <!-- Visit Details -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Visit Price per Person (₹) *</label>
                                <input type="number" id="visitPrice" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500" placeholder="200" min="50" required>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Maximum Visitors per Day</label>
                                <input type="number" id="maxVisitors" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500" placeholder="20" min="1" max="100">
                            </div>
                        </div>

                        <!-- What's Included -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">What's Included in Visit</label>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                <label class="flex items-center space-x-2">
                                    <input type="checkbox" class="text-green-600" value="farm-tour">
                                    <span class="text-sm">🚜 Farm Tour</span>
                                </label>
                                <label class="flex items-center space-x-2">
                                    <input type="checkbox" class="text-green-600" value="fresh-produce">
                                    <span class="text-sm">🥕 Fresh Produce Bag</span>
                                </label>
                                <label class="flex items-center space-x-2">
                                    <input type="checkbox" class="text-green-600" value="traditional-meal">
                                    <span class="text-sm">🍽️ Traditional Meal</span>
                                </label>
                                <label class="flex items-center space-x-2">
                                    <input type="checkbox" class="text-green-600" value="hands-on-activity">
                                    <span class="text-sm">👨‍🌾 Hands-on Activities</span>
                                </label>
                                <label class="flex items-center space-x-2">
                                    <input type="checkbox" class="text-green-600" value="educational-session">
                                    <span class="text-sm">📚 Educational Session</span>
                                </label>
                                <label class="flex items-center space-x-2">
                                    <input type="checkbox" class="text-green-600" value="refreshments">
                                    <span class="text-sm">☕ Refreshments</span>
                                </label>
                            </div>
                        </div>

                        <!-- Contact Information -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Contact Number *</label>
                                <input type="tel" id="farmContactNumber" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500" placeholder="+91 9876543210" required>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Best Time to Visit</label>
                                <select id="bestTime" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500">
                                    <option value="morning">🌅 Morning (6 AM - 12 PM)</option>
                                    <option value="afternoon">☀️ Afternoon (12 PM - 6 PM)</option>
                                    <option value="evening">🌅 Evening (6 PM - 8 PM)</option>
                                    <option value="anytime">⏰ Anytime</option>
                                </select>
                            </div>
                        </div>

                        <!-- Available Days -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Available Days</label>
                            <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                                <label class="flex items-center space-x-2">
                                    <input type="checkbox" class="text-green-600" value="monday" checked>
                                    <span class="text-sm">Monday</span>
                                </label>
                                <label class="flex items-center space-x-2">
                                    <input type="checkbox" class="text-green-600" value="tuesday" checked>
                                    <span class="text-sm">Tuesday</span>
                                </label>
                                <label class="flex items-center space-x-2">
                                    <input type="checkbox" class="text-green-600" value="wednesday" checked>
                                    <span class="text-sm">Wednesday</span>
                                </label>
                                <label class="flex items-center space-x-2">
                                    <input type="checkbox" class="text-green-600" value="thursday" checked>
                                    <span class="text-sm">Thursday</span>
                                </label>
                                <label class="flex items-center space-x-2">
                                    <input type="checkbox" class="text-green-600" value="friday" checked>
                                    <span class="text-sm">Friday</span>
                                </label>
                                <label class="flex items-center space-x-2">
                                    <input type="checkbox" class="text-green-600" value="saturday" checked>
                                    <span class="text-sm">Saturday</span>
                                </label>
                                <label class="flex items-center space-x-2">
                                    <input type="checkbox" class="text-green-600" value="sunday" checked>
                                    <span class="text-sm">Sunday</span>
                                </label>
                            </div>
                        </div>

                        <!-- Coin Reward Info -->
                        <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                            <div class="flex items-center space-x-2 mb-2">
                                <span class="text-2xl">🪙</span>
                                <h4 class="font-semibold text-green-800">Earn Coins from Farm Visits!</h4>
                            </div>
                            <div class="text-sm text-green-700 space-y-1">
                                <p>• Listing reward: 50 coins for approved farm listing</p>
                                <p>• Visit commission: 10% of each booking in coins</p>
                                <p>• Quality bonus: Up to 100 extra coins for detailed listings</p>
                                <p>• Review bonus: 15 coins per positive visitor review</p>
                            </div>
                        </div>

                        <!-- Submit Buttons -->
                        <div class="flex space-x-4">
                            <button type="button" onclick="submitFarmListing()" class="flex-1 bg-green-600 text-white py-3 rounded-lg hover:bg-green-700 font-semibold">
                                List My Farm
                            </button>
                            <button type="button" onclick="saveFarmDraft()" class="px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50">
                                Save Draft
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- My Farm Bookings Modal -->
    <div id="myFarmBookingsModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 modal">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">
                <div class="p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-2xl font-bold text-gray-800">📅 My Farm Visit Bookings</h3>
                        <button onclick="closeMyBookings()" class="text-gray-500 hover:text-gray-700 text-2xl">×</button>
                    </div>

                    <div class="space-y-6">
                        <!-- Upcoming Bookings -->
                        <div>
                            <h4 class="font-semibold text-gray-800 mb-3">🔜 Upcoming Visits</h4>
                            <div class="space-y-3">
                                <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                                    <div class="flex justify-between items-start mb-3">
                                        <div>
                                            <h5 class="font-semibold text-blue-800">Green Valley Organic Farm</h5>
                                            <p class="text-sm text-blue-700">Booking ID: #FV-2024-001</p>
                                        </div>
                                        <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm">Confirmed</span>
                                    </div>
                                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
                                        <div>
                                            <span class="font-medium">📅 Visit Date:</span>
                                            <p class="text-gray-700">March 25, 2024</p>
                                        </div>
                                        <div>
                                            <span class="font-medium">👥 Visitors:</span>
                                            <p class="text-gray-700">4 persons</p>
                                        </div>
                                        <div>
                                            <span class="font-medium">💰 Total Paid:</span>
                                            <p class="text-gray-700">₹800 (₹200 × 4)</p>
                                        </div>
                                    </div>
                                    <div class="mt-3 pt-3 border-t border-blue-200">
                                        <div class="flex space-x-2">
                                            <button class="bg-blue-600 text-white px-4 py-2 rounded text-sm hover:bg-blue-700">View Ticket</button>
                                            <button class="bg-red-600 text-white px-4 py-2 rounded text-sm hover:bg-red-700">Cancel Visit</button>
                                        </div>
                                    </div>
                                </div>

                                <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                                    <div class="flex justify-between items-start mb-3">
                                        <div>
                                            <h5 class="font-semibold text-green-800">Happy Cow Dairy Farm</h5>
                                            <p class="text-sm text-green-700">Booking ID: #FV-2024-002</p>
                                        </div>
                                        <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm">Confirmed</span>
                                    </div>
                                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
                                        <div>
                                            <span class="font-medium">📅 Visit Date:</span>
                                            <p class="text-gray-700">March 28, 2024</p>
                                        </div>
                                        <div>
                                            <span class="font-medium">👥 Visitors:</span>
                                            <p class="text-gray-700">2 persons</p>
                                        </div>
                                        <div>
                                            <span class="font-medium">💰 Total Paid:</span>
                                            <p class="text-gray-700">₹360 (₹180 × 2)</p>
                                        </div>
                                    </div>
                                    <div class="mt-3 pt-3 border-t border-green-200">
                                        <div class="flex space-x-2">
                                            <button class="bg-green-600 text-white px-4 py-2 rounded text-sm hover:bg-green-700">View Ticket</button>
                                            <button class="bg-red-600 text-white px-4 py-2 rounded text-sm hover:bg-red-700">Cancel Visit</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Past Visits -->
                        <div>
                            <h4 class="font-semibold text-gray-800 mb-3">✅ Completed Visits</h4>
                            <div class="space-y-3">
                                <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                                    <div class="flex justify-between items-start mb-3">
                                        <div>
                                            <h5 class="font-semibold text-gray-800">Sunrise Poultry Farm</h5>
                                            <p class="text-sm text-gray-600">Booking ID: #FV-2024-003</p>
                                        </div>
                                        <span class="bg-gray-100 text-gray-800 px-3 py-1 rounded-full text-sm">Completed</span>
                                    </div>
                                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
                                        <div>
                                            <span class="font-medium">📅 Visit Date:</span>
                                            <p class="text-gray-700">March 15, 2024</p>
                                        </div>
                                        <div>
                                            <span class="font-medium">👥 Visitors:</span>
                                            <p class="text-gray-700">3 persons</p>
                                        </div>
                                        <div>
                                            <span class="font-medium">💰 Total Paid:</span>
                                            <p class="text-gray-700">₹360 (₹120 × 3)</p>
                                        </div>
                                    </div>
                                    <div class="mt-3 pt-3 border-t border-gray-200">
                                        <div class="flex space-x-2">
                                            <button class="bg-blue-600 text-white px-4 py-2 rounded text-sm hover:bg-blue-700">Rate & Review</button>
                                            <button class="bg-gray-600 text-white px-4 py-2 rounded text-sm hover:bg-gray-700">Download Receipt</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Book Farm Visit Modal -->
    <div id="bookVisitModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 modal">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
                <div class="p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-2xl font-bold text-gray-800">🎫 Book Farm Visit</h3>
                        <button onclick="closeBookVisit()" class="text-gray-500 hover:text-gray-700 text-2xl">×</button>
                    </div>

                    <div id="bookVisitContent">
                        <!-- Content will be populated by JavaScript -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Blog Editor Modal -->
    <div id="blogEditorModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 modal">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">
                <div class="p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-2xl font-bold text-gray-800">✍️ Write Blog Post</h3>
                        <button onclick="closeBlogEditor()" class="text-gray-500 hover:text-gray-700 text-2xl">×</button>
                    </div>

                    <form id="blogForm" class="space-y-6">
                        <!-- Blog Type Selection -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-3">Content Type</label>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                                <label class="flex items-center space-x-3 p-3 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50">
                                    <input type="radio" name="blogType" value="blog" class="text-blue-600" checked>
                                    <div>
                                        <div class="font-semibold">📝 Blog Post</div>
                                        <div class="text-xs text-gray-600">Detailed article or guide</div>
                                    </div>
                                </label>
                                <label class="flex items-center space-x-3 p-3 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50">
                                    <input type="radio" name="blogType" value="review" class="text-blue-600">
                                    <div>
                                        <div class="font-semibold">⭐ Review</div>
                                        <div class="text-xs text-gray-600">Product or service review</div>
                                    </div>
                                </label>
                                <label class="flex items-center space-x-3 p-3 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50">
                                    <input type="radio" name="blogType" value="experience" class="text-blue-600">
                                    <div>
                                        <div class="font-semibold">💭 Experience</div>
                                        <div class="text-xs text-gray-600">Personal farming story</div>
                                    </div>
                                </label>
                            </div>
                        </div>

                        <!-- Blog Details -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Title *</label>
                                <input type="text" id="blogTitle" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Enter your blog title" required>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Category *</label>
                                <select id="blogCategory" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                                    <option value="">Select category</option>
                                    <option value="crop-cultivation">🌾 Crop Cultivation</option>
                                    <option value="livestock">🐄 Livestock Management</option>
                                    <option value="organic-farming">🌱 Organic Farming</option>
                                    <option value="equipment-review">🚜 Equipment Review</option>
                                    <option value="success-story">🏆 Success Story</option>
                                    <option value="tips-tricks">💡 Tips & Tricks</option>
                                    <option value="market-insights">📈 Market Insights</option>
                                    <option value="government-schemes">🏛️ Government Schemes</option>
                                </select>
                            </div>
                        </div>

                        <!-- Featured Image Upload -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Featured Image</label>
                            <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center cursor-pointer hover:border-blue-400" onclick="document.getElementById('blogImage').click()">
                                <span class="text-4xl">📷</span>
                                <p class="text-gray-600 mt-2">Upload a featured image for your blog post</p>
                                <p class="text-xs text-gray-500 mt-1">JPG, PNG (Max 5MB)</p>
                                <input type="file" id="blogImage" class="hidden" accept="image/*" onchange="handleBlogImageSelect(event)">
                            </div>
                            <div id="blogImagePreview" class="hidden mt-3">
                                <div class="flex items-center space-x-3">
                                    <span class="text-2xl">🖼️</span>
                                    <div>
                                        <div class="font-semibold text-gray-800" id="blogImageName"></div>
                                        <div class="text-sm text-gray-600">Image uploaded successfully</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Blog Content Editor -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Content *</label>
                            <div class="border border-gray-300 rounded-lg">
                                <!-- Toolbar -->
                                <div class="border-b border-gray-300 p-3 flex flex-wrap gap-2">
                                    <button type="button" onclick="formatText('bold')" class="px-3 py-1 border border-gray-300 rounded hover:bg-gray-100" title="Bold">
                                        <strong>B</strong>
                                    </button>
                                    <button type="button" onclick="formatText('italic')" class="px-3 py-1 border border-gray-300 rounded hover:bg-gray-100" title="Italic">
                                        <em>I</em>
                                    </button>
                                    <button type="button" onclick="formatText('underline')" class="px-3 py-1 border border-gray-300 rounded hover:bg-gray-100" title="Underline">
                                        <u>U</u>
                                    </button>
                                    <div class="border-l border-gray-300 mx-2"></div>
                                    <button type="button" onclick="insertList('ul')" class="px-3 py-1 border border-gray-300 rounded hover:bg-gray-100" title="Bullet List">
                                        • List
                                    </button>
                                    <button type="button" onclick="insertList('ol')" class="px-3 py-1 border border-gray-300 rounded hover:bg-gray-100" title="Numbered List">
                                        1. List
                                    </button>
                                    <div class="border-l border-gray-300 mx-2"></div>
                                    <button type="button" onclick="insertHeading()" class="px-3 py-1 border border-gray-300 rounded hover:bg-gray-100" title="Heading">
                                        H1
                                    </button>
                                    <button type="button" onclick="insertQuote()" class="px-3 py-1 border border-gray-300 rounded hover:bg-gray-100" title="Quote">
                                        " "
                                    </button>
                                </div>
                                <!-- Editor -->
                                <div id="blogEditor" contenteditable="true" class="p-4 min-h-[300px] focus:outline-none" placeholder="Start writing your blog post here...">
                                    <p>Start writing your blog post here...</p>
                                </div>
                            </div>
                            <div class="text-xs text-gray-500 mt-1">
                                <span id="wordCount">0</span> words • Use the toolbar above to format your text
                            </div>
                        </div>

                        <!-- Tags and Settings -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Tags</label>
                                <input type="text" id="blogTags" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="farming, organic, tips">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Reading Time (minutes)</label>
                                <input type="number" id="readingTime" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="5" min="1" max="60">
                            </div>
                        </div>

                        <!-- SEO Section -->
                        <div class="bg-gray-50 rounded-lg p-4">
                            <h4 class="font-semibold text-gray-800 mb-3">SEO Settings</h4>
                            <div class="space-y-3">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Meta Description</label>
                                    <textarea id="metaDescription" rows="2" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Brief description for search engines (150-160 characters)"></textarea>
                                </div>
                            </div>
                        </div>

                        <!-- Coin Reward Info -->
                        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                            <div class="flex items-center space-x-2 mb-2">
                                <span class="text-2xl">🪙</span>
                                <h4 class="font-semibold text-blue-800">Earn Coins for Your Blog!</h4>
                            </div>
                            <div class="text-sm text-blue-700 space-y-1">
                                <p>• Base reward: 15 coins for approved blog post</p>
                                <p>• Quality bonus: Up to 35 extra coins for well-written content</p>
                                <p>• Read rewards: 1 coin per 50 reads</p>
                                <p>• Engagement rewards: 3 coins per comment received</p>
                            </div>
                        </div>

                        <!-- Submit Buttons -->
                        <div class="flex space-x-4">
                            <button type="button" onclick="publishBlog()" class="flex-1 bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 font-semibold">
                                Publish Blog
                            </button>
                            <button type="button" onclick="saveBlogDraft()" class="px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50">
                                Save Draft
                            </button>
                            <button type="button" onclick="previewBlog()" class="px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700">
                                Preview
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Marketplace & Mandi Prices Page -->
    <div id="marketplace" class="page-content">
        <div class="container mx-auto px-4 py-8">
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold text-gray-800 mb-4">🛒 Marketplace & Mandi Prices</h2>
                <p class="text-gray-600">Trade agricultural products and check real-time market prices</p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Marketplace Section -->
                <div class="lg:col-span-2">
                    <div class="bg-white rounded-xl shadow-lg p-6">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-xl font-semibold text-gray-800">🛒 Marketplace</h3>
                            <div class="flex space-x-2">
                                <button onclick="openSellProduct()" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700">Sell Product</button>
                                <button onclick="openMyOrders()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">My Orders</button>
                                <div class="relative">
                                    <button onclick="openCart()" class="bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 flex items-center space-x-2">
                                        <span>🛒</span>
                                        <span>Cart</span>
                                        <span id="cartCount" class="bg-red-500 text-white text-xs rounded-full px-2 py-1 ml-1">0</span>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="flex space-x-4 mb-6">
                            <button onclick="filterProducts('all')" class="filter-btn bg-gray-200 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-300 active">All</button>
                            <button onclick="filterProducts('seeds')" class="filter-btn bg-green-100 text-green-800 px-4 py-2 rounded-lg hover:bg-green-200">Seeds</button>
                            <button onclick="filterProducts('fertilizers')" class="filter-btn bg-yellow-100 text-yellow-800 px-4 py-2 rounded-lg hover:bg-yellow-200">Fertilizers</button>
                            <button onclick="filterProducts('cart')" class="filter-btn bg-orange-100 text-orange-800 px-4 py-2 rounded-lg hover:bg-orange-200">Cart Items</button>
                        </div>

                        <div id="productsGrid" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <!-- Seeds -->
                            <div class="product-item border rounded-lg p-4 hover:shadow-md transition-shadow" data-category="seeds" data-id="1">
                                <div class="text-2xl mb-2">🌾</div>
                                <h4 class="font-semibold">Premium Wheat Seeds</h4>
                                <p class="text-sm text-gray-600 mb-2">High yield variety - 50kg bag</p>
                                <div class="flex justify-between items-center mb-2">
                                    <span class="font-bold text-green-600">₹2,250</span>
                                    <span class="text-xs text-gray-500">⭐ 4.8 (23 reviews)</span>
                                </div>
                                <div class="flex space-x-2">
                                    <button onclick="openBuyNow(1)" class="w-full bg-green-600 text-white py-2 rounded hover:bg-green-700">Buy Now</button>
                                </div>
                            </div>

                            <div class="product-item border rounded-lg p-4 hover:shadow-md transition-shadow" data-category="seeds" data-id="2">
                                <div class="text-2xl mb-2">🌽</div>
                                <h4 class="font-semibold">Hybrid Corn Seeds</h4>
                                <p class="text-sm text-gray-600 mb-2">Disease resistant - 25kg bag</p>
                                <div class="flex justify-between items-center mb-2">
                                    <span class="font-bold text-green-600">₹1,800</span>
                                    <span class="text-xs text-gray-500">⭐ 4.7 (18 reviews)</span>
                                </div>
                                <div class="flex space-x-2">
                                    <button onclick="openBuyNow(2)" class="w-full bg-green-600 text-white py-2 rounded hover:bg-green-700">Buy Now</button>
                                </div>
                            </div>

                            <div class="product-item border rounded-lg p-4 hover:shadow-md transition-shadow" data-category="seeds" data-id="3">
                                <div class="text-2xl mb-2">🌾</div>
                                <h4 class="font-semibold">Basmati Rice Seeds</h4>
                                <p class="text-sm text-gray-600 mb-2">Premium quality - 30kg bag</p>
                                <div class="flex justify-between items-center mb-2">
                                    <span class="font-bold text-green-600">₹3,200</span>
                                    <span class="text-xs text-gray-500">⭐ 4.9 (35 reviews)</span>
                                </div>
                                <div class="flex space-x-2">
                                    <button onclick="openBuyNow(3)" class="w-full bg-green-600 text-white py-2 rounded hover:bg-green-700">Buy Now</button>
                                </div>
                            </div>

                            <!-- Fertilizers -->
                            <div class="product-item border rounded-lg p-4 hover:shadow-md transition-shadow" data-category="fertilizers" data-id="4">
                                <div class="text-2xl mb-2">🧪</div>
                                <h4 class="font-semibold">Organic Fertilizer NPK</h4>
                                <p class="text-sm text-gray-600 mb-2">10:26:26 - 25kg bag</p>
                                <div class="flex justify-between items-center mb-2">
                                    <span class="font-bold text-green-600">₹850</span>
                                    <span class="text-xs text-gray-500">⭐ 4.6 (15 reviews)</span>
                                </div>
                                <div class="flex space-x-2">
                                    <button onclick="openBuyNow(4)" class="w-full bg-green-600 text-white py-2 rounded hover:bg-green-700">Buy Now</button>
                                </div>
                            </div>

                            <div class="product-item border rounded-lg p-4 hover:shadow-md transition-shadow" data-category="fertilizers" data-id="5">
                                <div class="text-2xl mb-2">🌱</div>
                                <h4 class="font-semibold">Urea Fertilizer</h4>
                                <p class="text-sm text-gray-600 mb-2">46% Nitrogen - 50kg bag</p>
                                <div class="flex justify-between items-center mb-2">
                                    <span class="font-bold text-green-600">₹1,200</span>
                                    <span class="text-xs text-gray-500">⭐ 4.5 (28 reviews)</span>
                                </div>
                                <div class="flex space-x-2">
                                    <button onclick="openBuyNow(5)" class="w-full bg-green-600 text-white py-2 rounded hover:bg-green-700">Buy Now</button>
                                </div>
                            </div>

                            <div class="product-item border rounded-lg p-4 hover:shadow-md transition-shadow" data-category="fertilizers" data-id="6">
                                <div class="text-2xl mb-2">🍃</div>
                                <h4 class="font-semibold">Vermicompost</h4>
                                <p class="text-sm text-gray-600 mb-2">Organic compost - 40kg bag</p>
                                <div class="flex justify-between items-center mb-2">
                                    <span class="font-bold text-green-600">₹600</span>
                                    <span class="text-xs text-gray-500">⭐ 4.8 (42 reviews)</span>
                                </div>
                                <div class="flex space-x-2">
                                    <button onclick="openBuyNow(6)" class="w-full bg-green-600 text-white py-2 rounded hover:bg-green-700">Buy Now</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Mandi Prices Section -->
                <div class="lg:col-span-1">
                    <div class="bg-white rounded-xl shadow-lg p-6">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-xl font-semibold text-gray-800">💰 Live Mandi Prices</h3>
                            <select class="border rounded px-2 py-1 text-sm">
                                <option>Your State</option>
                                <option>Maharashtra</option>
                                <option>Punjab</option>
                                <option>UP</option>
                            </select>
                        </div>

                        <div class="space-y-3">
                            <div class="bg-green-50 border rounded-lg p-3">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <h4 class="font-semibold text-green-800">Wheat</h4>
                                        <p class="text-xs text-green-600">Per Quintal</p>
                                    </div>
                                    <div class="text-right">
                                        <div class="font-bold text-green-800">₹2,150</div>
                                        <div class="text-xs text-green-600">↗ +2.5%</div>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-yellow-50 border rounded-lg p-3">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <h4 class="font-semibold text-yellow-800">Rice</h4>
                                        <p class="text-xs text-yellow-600">Per Quintal</p>
                                    </div>
                                    <div class="text-right">
                                        <div class="font-bold text-yellow-800">₹3,200</div>
                                        <div class="text-xs text-red-600">↘ -1.2%</div>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-blue-50 border rounded-lg p-3">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <h4 class="font-semibold text-blue-800">Sugarcane</h4>
                                        <p class="text-xs text-blue-600">Per Quintal</p>
                                    </div>
                                    <div class="text-right">
                                        <div class="font-bold text-blue-800">₹350</div>
                                        <div class="text-xs text-green-600">↗ +0.8%</div>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-purple-50 border rounded-lg p-3">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <h4 class="font-semibold text-purple-800">Cotton</h4>
                                        <p class="text-xs text-purple-600">Per Quintal</p>
                                    </div>
                                    <div class="text-right">
                                        <div class="font-bold text-purple-800">₹6,800</div>
                                        <div class="text-xs text-green-600">↗ +3.1%</div>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-orange-50 border rounded-lg p-3">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <h4 class="font-semibold text-orange-800">Onion</h4>
                                        <p class="text-xs text-orange-600">Per Quintal</p>
                                    </div>
                                    <div class="text-right">
                                        <div class="font-bold text-orange-800">₹1,850</div>
                                        <div class="text-xs text-red-600">↘ -5.2%</div>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-teal-50 border rounded-lg p-3">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <h4 class="font-semibold text-teal-800">Tomato</h4>
                                        <p class="text-xs text-teal-600">Per Quintal</p>
                                    </div>
                                    <div class="text-right">
                                        <div class="font-bold text-teal-800">₹2,400</div>
                                        <div class="text-xs text-green-600">↗ +8.3%</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <button class="w-full mt-4 bg-gray-100 text-gray-800 py-2 rounded hover:bg-gray-200">View All Prices</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Farm Visits Page -->
    <div id="farm-visits" class="page-content">
        <div class="container mx-auto px-4 py-8">
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold text-gray-800 mb-4">🚜 Farm Visits & Agro-Tourism</h2>
                <p class="text-gray-600">Explore farms, learn from experiences, and earn through agro-tourism</p>
            </div>

            <div class="flex justify-between items-center mb-6">
                <div class="flex space-x-4">
                    <button onclick="openListMyFarm()" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700">List My Farm</button>
                    <button onclick="openMyBookings()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">My Bookings</button>
                </div>
                <select class="border rounded-lg px-3 py-2">
                    <option>All Farm Types</option>
                    <option>Organic Farms</option>
                    <option>Dairy Farms</option>
                    <option>Poultry Farms</option>
                    <option>Aquaculture</option>
                </select>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <div class="bg-white rounded-lg shadow-lg overflow-hidden">
                    <div class="bg-green-100 h-48 flex items-center justify-center">
                        <span class="text-6xl">🌱</span>
                    </div>
                    <div class="p-4">
                        <h4 class="font-semibold mb-2">Green Valley Organic Farm</h4>
                        <p class="text-sm text-gray-600 mb-3">Experience sustainable farming practices and harvest fresh vegetables</p>
                        <div class="flex justify-between items-center text-sm text-gray-500 mb-3">
                            <span>📍 Maharashtra</span>
                            <span>⭐ 4.8 (24 reviews)</span>
                        </div>
                        <div class="flex justify-between items-center mb-3">
                            <span class="text-green-600 font-semibold">₹200/person</span>
                            <span class="text-xs text-gray-500">Includes: Fresh produce bag</span>
                        </div>
                        <button onclick="openBookVisit(1)" class="w-full bg-green-600 text-white py-2 rounded hover:bg-green-700">Book Visit</button>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow-lg overflow-hidden">
                    <div class="bg-blue-100 h-48 flex items-center justify-center">
                        <span class="text-6xl">🐟</span>
                    </div>
                    <div class="p-4">
                        <h4 class="font-semibold mb-2">Aqua Fresh Fish Farm</h4>
                        <p class="text-sm text-gray-600 mb-3">Learn aquaculture techniques and enjoy fresh fish experience</p>
                        <div class="flex justify-between items-center text-sm text-gray-500 mb-3">
                            <span>📍 Andhra Pradesh</span>
                            <span>⭐ 4.6 (18 reviews)</span>
                        </div>
                        <div class="flex justify-between items-center mb-3">
                            <span class="text-green-600 font-semibold">₹150/person</span>
                            <span class="text-xs text-gray-500">Includes: Fish meal</span>
                        </div>
                        <button onclick="openBookVisit(2)" class="w-full bg-green-600 text-white py-2 rounded hover:bg-green-700">Book Visit</button>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow-lg overflow-hidden">
                    <div class="bg-yellow-100 h-48 flex items-center justify-center">
                        <span class="text-6xl">🐄</span>
                    </div>
                    <div class="p-4">
                        <h4 class="font-semibold mb-2">Happy Cow Dairy Farm</h4>
                        <p class="text-sm text-gray-600 mb-3">Experience dairy farming and learn about cattle care</p>
                        <div class="flex justify-between items-center text-sm text-gray-500 mb-3">
                            <span>📍 Punjab</span>
                            <span>⭐ 4.9 (32 reviews)</span>
                        </div>
                        <div class="flex justify-between items-center mb-3">
                            <span class="text-green-600 font-semibold">₹180/person</span>
                            <span class="text-xs text-gray-500">Includes: Fresh milk & cheese</span>
                        </div>
                        <button onclick="openBookVisit(3)" class="w-full bg-green-600 text-white py-2 rounded hover:bg-green-700">Book Visit</button>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow-lg overflow-hidden">
                    <div class="bg-red-100 h-48 flex items-center justify-center">
                        <span class="text-6xl">🐔</span>
                    </div>
                    <div class="p-4">
                        <h4 class="font-semibold mb-2">Sunrise Poultry Farm</h4>
                        <p class="text-sm text-gray-600 mb-3">Learn about modern poultry farming and egg production</p>
                        <div class="flex justify-between items-center text-sm text-gray-500 mb-3">
                            <span>📍 Tamil Nadu</span>
                            <span>⭐ 4.7 (21 reviews)</span>
                        </div>
                        <div class="flex justify-between items-center mb-3">
                            <span class="text-green-600 font-semibold">₹120/person</span>
                            <span class="text-xs text-gray-500">Includes: Fresh eggs</span>
                        </div>
                        <button onclick="openBookVisit(4)" class="w-full bg-green-600 text-white py-2 rounded hover:bg-green-700">Book Visit</button>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow-lg overflow-hidden">
                    <div class="bg-purple-100 h-48 flex items-center justify-center">
                        <span class="text-6xl">🌾</span>
                    </div>
                    <div class="p-4">
                        <h4 class="font-semibold mb-2">Heritage Grain Farm</h4>
                        <p class="text-sm text-gray-600 mb-3">Discover traditional farming methods and heritage crop varieties</p>
                        <div class="flex justify-between items-center text-sm text-gray-500 mb-3">
                            <span>📍 Rajasthan</span>
                            <span>⭐ 4.5 (16 reviews)</span>
                        </div>
                        <div class="flex justify-between items-center mb-3">
                            <span class="text-green-600 font-semibold">₹250/person</span>
                            <span class="text-xs text-gray-500">Includes: Traditional meal</span>
                        </div>
                        <button onclick="openBookVisit(5)" class="w-full bg-green-600 text-white py-2 rounded hover:bg-green-700">Book Visit</button>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow-lg overflow-hidden">
                    <div class="bg-teal-100 h-48 flex items-center justify-center">
                        <span class="text-6xl">🥬</span>
                    </div>
                    <div class="p-4">
                        <h4 class="font-semibold mb-2">Urban Hydroponic Farm</h4>
                        <p class="text-sm text-gray-600 mb-3">Modern soilless farming techniques in urban setting</p>
                        <div class="flex justify-between items-center text-sm text-gray-500 mb-3">
                            <span>📍 Karnataka</span>
                            <span>⭐ 4.8 (29 reviews)</span>
                        </div>
                        <div class="flex justify-between items-center mb-3">
                            <span class="text-green-600 font-semibold">₹300/person</span>
                            <span class="text-xs text-gray-500">Includes: Hydroponic kit</span>
                        </div>
                        <button onclick="openBookVisit(6)" class="w-full bg-green-600 text-white py-2 rounded hover:bg-green-700">Book Visit</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- News & Notifications Page -->
    <div id="news-notifications" class="page-content">
        <div class="container mx-auto px-4 py-8">
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold text-gray-800 mb-4">📰 News & Notifications</h2>
                <p class="text-gray-600">Stay updated with agriculture news and important alerts</p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Notifications Section -->
                <div class="lg:col-span-1">
                    <div class="bg-white rounded-xl shadow-lg p-6">
                        <h3 class="text-xl font-semibold text-gray-800 mb-4">🔔 Recent Notifications</h3>
                        
                        <div class="space-y-4">
                            <div class="bg-red-50 border-l-4 border-red-400 p-3">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h4 class="font-semibold text-red-800 text-sm">Weather Alert</h4>
                                        <p class="text-xs text-red-700 mt-1">Heavy rainfall expected. Protect crops!</p>
                                        <span class="text-xs text-red-600">2 hours ago</span>
                                    </div>
                                    <span class="bg-red-100 text-red-800 px-2 py-1 rounded text-xs">Urgent</span>
                                </div>
                            </div>

                            <div class="bg-blue-50 border-l-4 border-blue-400 p-3">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h4 class="font-semibold text-blue-800 text-sm">New Subsidy</h4>
                                        <p class="text-xs text-blue-700 mt-1">Solar pump subsidy applications open</p>
                                        <span class="text-xs text-blue-600">1 day ago</span>
                                    </div>
                                    <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs">Info</span>
                                </div>
                            </div>

                            <div class="bg-green-50 border-l-4 border-green-400 p-3">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h4 class="font-semibold text-green-800 text-sm">Price Update</h4>
                                        <p class="text-xs text-green-700 mt-1">Wheat prices up 5% in local mandi</p>
                                        <span class="text-xs text-green-600">3 days ago</span>
                                    </div>
                                    <span class="bg-green-100 text-green-800 px-2 py-1 rounded text-xs">Market</span>
                                </div>
                            </div>

                            <div class="bg-yellow-50 border-l-4 border-yellow-400 p-3">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h4 class="font-semibold text-yellow-800 text-sm">Tax Update</h4>
                                        <p class="text-xs text-yellow-700 mt-1">New GST rates on fertilizers announced</p>
                                        <span class="text-xs text-yellow-600">5 days ago</span>
                                    </div>
                                    <span class="bg-yellow-100 text-yellow-800 px-2 py-1 rounded text-xs">Policy</span>
                                </div>
                            </div>
                        </div>

                        <button class="w-full mt-4 bg-gray-100 text-gray-800 py-2 rounded hover:bg-gray-200">View All Notifications</button>
                    </div>
                </div>

                <!-- News Section -->
                <div class="lg:col-span-2">
                    <div class="bg-white rounded-xl shadow-lg p-6">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-xl font-semibold text-gray-800">📰 Agriculture News</h3>
                            <div class="flex space-x-2">
                                <button class="bg-blue-100 text-blue-800 px-3 py-1 rounded text-sm">Global</button>
                                <button class="bg-green-100 text-green-800 px-3 py-1 rounded text-sm">National</button>
                                <button class="bg-yellow-100 text-yellow-800 px-3 py-1 rounded text-sm">Local</button>
                            </div>
                        </div>

                        <div class="space-y-6">
                            <div class="border-b pb-4">
                                <div class="flex space-x-4">
                                    <div class="bg-blue-100 w-20 h-20 rounded-lg flex items-center justify-center flex-shrink-0">
                                        <span class="text-2xl">🌾</span>
                                    </div>
                                    <div class="flex-1">
                                        <h4 class="font-semibold text-gray-800 mb-2">Government Announces New Export Policy for Agricultural Products</h4>
                                        <p class="text-sm text-gray-600 mb-2">The new policy aims to boost farmer income through increased export opportunities and reduced trade barriers...</p>
                                        <div class="flex justify-between items-center">
                                            <span class="text-xs text-gray-500">Agriculture Ministry • 2 hours ago</span>
                                            <button class="text-blue-600 text-sm hover:underline">Read More</button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="border-b pb-4">
                                <div class="flex space-x-4">
                                    <div class="bg-red-100 w-20 h-20 rounded-lg flex items-center justify-center flex-shrink-0">
                                        <span class="text-2xl">🌧️</span>
                                    </div>
                                    <div class="flex-1">
                                        <h4 class="font-semibold text-gray-800 mb-2">Drought Conditions Affect Crop Yields in Western States</h4>
                                        <p class="text-sm text-gray-600 mb-2">Farmers urged to adopt water conservation techniques as monsoon delays continue to impact agricultural production...</p>
                                        <div class="flex justify-between items-center">
                                            <span class="text-xs text-gray-500">Weather Bureau • 5 hours ago</span>
                                            <button class="text-blue-600 text-sm hover:underline">Read More</button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="border-b pb-4">
                                <div class="flex space-x-4">
                                    <div class="bg-green-100 w-20 h-20 rounded-lg flex items-center justify-center flex-shrink-0">
                                        <span class="text-2xl">🧬</span>
                                    </div>
                                    <div class="flex-1">
                                        <h4 class="font-semibold text-gray-800 mb-2">New Disease-Resistant Crop Varieties Released</h4>
                                        <p class="text-sm text-gray-600 mb-2">Scientists develop improved seeds that can withstand common plant diseases and climate challenges...</p>
                                        <div class="flex justify-between items-center">
                                            <span class="text-xs text-gray-500">Research Institute • 1 day ago</span>
                                            <button class="text-blue-600 text-sm hover:underline">Read More</button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="border-b pb-4">
                                <div class="flex space-x-4">
                                    <div class="bg-yellow-100 w-20 h-20 rounded-lg flex items-center justify-center flex-shrink-0">
                                        <span class="text-2xl">💰</span>
                                    </div>
                                    <div class="flex-1">
                                        <h4 class="font-semibold text-gray-800 mb-2">Global Food Prices Show Upward Trend</h4>
                                        <p class="text-sm text-gray-600 mb-2">International markets see increased demand for agricultural commodities, benefiting Indian farmers...</p>
                                        <div class="flex justify-between items-center">
                                            <span class="text-xs text-gray-500">Market Analysis • 2 days ago</span>
                                            <button class="text-blue-600 text-sm hover:underline">Read More</button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="border-b pb-4">
                                <div class="flex space-x-4">
                                    <div class="bg-purple-100 w-20 h-20 rounded-lg flex items-center justify-center flex-shrink-0">
                                        <span class="text-2xl">🤖</span>
                                    </div>
                                    <div class="flex-1">
                                        <h4 class="font-semibold text-gray-800 mb-2">AI Technology Revolutionizes Precision Agriculture</h4>
                                        <p class="text-sm text-gray-600 mb-2">New artificial intelligence tools help farmers optimize crop yields and reduce resource wastage...</p>
                                        <div class="flex justify-between items-center">
                                            <span class="text-xs text-gray-500">Tech News • 3 days ago</span>
                                            <button class="text-blue-600 text-sm hover:underline">Read More</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <button class="w-full mt-6 bg-blue-600 text-white py-2 rounded hover:bg-blue-700">Load More News</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function showPage(pageId) {
            // Hide all pages
            const pages = document.querySelectorAll('.page-content');
            pages.forEach(page => {
                page.classList.remove('active');
            });

            // Show selected page
            document.getElementById(pageId).classList.add('active');

            // Update navigation
            const navLinks = document.querySelectorAll('.nav-link');
            navLinks.forEach(link => {
                link.classList.remove('active');
            });
            event.target.classList.add('active');

            // Scroll to top
            window.scrollTo(0, 0);
        }

        // Video Upload Functions
        function openVideoUpload() {
            document.getElementById('videoUploadModal').classList.remove('hidden');
        }

        function closeVideoUpload() {
            document.getElementById('videoUploadModal').classList.add('hidden');
            resetVideoForm();
        }

        function handleVideoSelect(event) {
            const file = event.target.files[0];
            if (file) {
                const preview = document.getElementById('videoPreview');
                const fileName = document.getElementById('videoFileName');
                const fileSize = document.getElementById('videoFileSize');
                
                fileName.textContent = file.name;
                fileSize.textContent = `${(file.size / (1024 * 1024)).toFixed(2)} MB`;
                preview.classList.remove('hidden');
            }
        }

        function handleThumbnailSelect(event) {
            const file = event.target.files[0];
            if (file) {
                const preview = document.getElementById('thumbnailPreview');
                const name = document.getElementById('thumbnailName');
                
                name.textContent = file.name;
                preview.classList.remove('hidden');
            }
        }

        function uploadVideo() {
            const title = document.getElementById('videoTitle').value;
            const category = document.getElementById('videoCategory').value;
            const videoFile = document.getElementById('videoFile').files[0];
            
            if (!title || !category || !videoFile) {
                alert('Please fill in all required fields and select a video file.');
                return;
            }

            // Simulate upload progress
            const progressBar = document.getElementById('uploadProgress');
            const status = document.getElementById('uploadStatus');
            let progress = 0;
            
            status.textContent = 'Uploading...';
            
            const interval = setInterval(() => {
                progress += Math.random() * 15;
                if (progress > 100) progress = 100;
                
                progressBar.style.width = progress + '%';
                
                if (progress === 100) {
                    clearInterval(interval);
                    status.textContent = 'Upload complete! Processing video...';
                    
                    setTimeout(() => {
                        alert('Video uploaded successfully! You earned 25 coins. Your video is under review.');
                        closeVideoUpload();
                        updateCoins(25);
                    }, 2000);
                }
            }, 200);
        }

        function saveAsDraft() {
            alert('Video saved as draft! You can continue editing later.');
            closeVideoUpload();
        }

        function resetVideoForm() {
            document.getElementById('videoUploadForm').reset();
            document.getElementById('videoPreview').classList.add('hidden');
            document.getElementById('thumbnailPreview').classList.add('hidden');
            document.getElementById('uploadProgress').style.width = '0%';
            document.getElementById('uploadStatus').textContent = 'Ready to upload';
        }

        // Blog Editor Functions
        function openBlogEditor() {
            document.getElementById('blogEditorModal').classList.remove('hidden');
            updateWordCount();
        }

        function closeBlogEditor() {
            document.getElementById('blogEditorModal').classList.add('hidden');
        }

        function handleBlogImageSelect(event) {
            const file = event.target.files[0];
            if (file) {
                const preview = document.getElementById('blogImagePreview');
                const name = document.getElementById('blogImageName');
                
                name.textContent = file.name;
                preview.classList.remove('hidden');
            }
        }

        function formatText(command) {
            document.execCommand(command, false, null);
            document.getElementById('blogEditor').focus();
        }

        function insertList(type) {
            document.execCommand('insert' + (type === 'ul' ? 'UnorderedList' : 'OrderedList'), false, null);
            document.getElementById('blogEditor').focus();
        }

        function insertHeading() {
            const selection = window.getSelection().toString();
            if (selection) {
                document.execCommand('formatBlock', false, 'h2');
            } else {
                document.execCommand('insertHTML', false, '<h2>Heading</h2>');
            }
            document.getElementById('blogEditor').focus();
        }

        function insertQuote() {
            const selection = window.getSelection().toString();
            if (selection) {
                document.execCommand('formatBlock', false, 'blockquote');
            } else {
                document.execCommand('insertHTML', false, '<blockquote>Quote text here</blockquote>');
            }
            document.getElementById('blogEditor').focus();
        }

        function updateWordCount() {
            const editor = document.getElementById('blogEditor');
            const text = editor.textContent || editor.innerText || '';
            const wordCount = text.trim().split(/\s+/).length;
            document.getElementById('wordCount').textContent = wordCount;
        }

        function publishBlog() {
            const title = document.getElementById('blogTitle').value;
            const category = document.getElementById('blogCategory').value;
            const content = document.getElementById('blogEditor').textContent;
            
            if (!title || !category || content.length < 100) {
                alert('Please fill in all required fields. Blog content should be at least 100 words.');
                return;
            }

            alert('Blog published successfully! You earned 15 coins. Your blog is now live.');
            closeBlogEditor();
            updateCoins(15);
        }

        function saveBlogDraft() {
            alert('Blog saved as draft! You can continue editing later.');
        }

        function previewBlog() {
            const title = document.getElementById('blogTitle').value;
            const content = document.getElementById('blogEditor').innerHTML;
            
            const previewWindow = window.open('', '_blank');
            previewWindow.document.write(`
                <html>
                    <head>
                        <title>Blog Preview</title>
                        <style>
                            body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
                            h1 { color: #333; }
                            blockquote { border-left: 4px solid #ddd; padding-left: 16px; margin: 16px 0; }
                        </style>
                    </head>
                    <body>
                        <h1>${title || 'Blog Title'}</h1>
                        <div>${content}</div>
                    </body>
                </html>
            `);
        }

        // Farm Visit Functions
        let farmVisits = {
            1: { name: 'Green Valley Organic Farm', price: 200, image: '🌱', description: 'Experience sustainable farming practices and harvest fresh vegetables', location: 'Maharashtra', includes: 'Fresh produce bag' },
            2: { name: 'Aqua Fresh Fish Farm', price: 150, image: '🐟', description: 'Learn aquaculture techniques and enjoy fresh fish experience', location: 'Andhra Pradesh', includes: 'Fish meal' },
            3: { name: 'Happy Cow Dairy Farm', price: 180, image: '🐄', description: 'Experience dairy farming and learn about cattle care', location: 'Punjab', includes: 'Fresh milk & cheese' },
            4: { name: 'Sunrise Poultry Farm', price: 120, image: '🐔', description: 'Learn about modern poultry farming and egg production', location: 'Tamil Nadu', includes: 'Fresh eggs' },
            5: { name: 'Heritage Grain Farm', price: 250, image: '🌾', description: 'Discover traditional farming methods and heritage crop varieties', location: 'Rajasthan', includes: 'Traditional meal' },
            6: { name: 'Urban Hydroponic Farm', price: 300, image: '🥬', description: 'Modern soilless farming techniques in urban setting', location: 'Karnataka', includes: 'Hydroponic kit' }
        };

        function openListMyFarm() {
            document.getElementById('listMyFarmModal').classList.remove('hidden');
        }

        function closeListMyFarm() {
            document.getElementById('listMyFarmModal').classList.add('hidden');
            resetFarmForm();
        }

        function openMyBookings() {
            document.getElementById('myFarmBookingsModal').classList.remove('hidden');
        }

        function closeMyBookings() {
            document.getElementById('myFarmBookingsModal').classList.add('hidden');
        }

        function openBookVisit(farmId) {
            const farm = farmVisits[farmId];
            if (!farm) return;

            const content = `
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Farm Details -->
                    <div class="bg-gray-100 rounded-lg p-6 text-center">
                        <span class="text-8xl">${farm.image}</span>
                        <h4 class="text-xl font-semibold mt-4">${farm.name}</h4>
                        <p class="text-gray-600 mt-2">${farm.description}</p>
                        <div class="mt-4 text-sm text-gray-600">
                            <p>📍 ${farm.location}</p>
                            <p>🎁 Includes: ${farm.includes}</p>
                        </div>
                    </div>

                    <!-- Booking Form -->
                    <div class="space-y-4">
                        <!-- Visitor Details -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Your Name *</label>
                            <input type="text" id="visitorName" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500" placeholder="Enter your full name" required>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Contact Number *</label>
                            <input type="tel" id="visitorPhone" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500" placeholder="+91 9876543210" required>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Number of Visitors *</label>
                                <input type="number" id="numVisitors" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500" value="1" min="1" max="20" onchange="updateVisitPrice(${farmId})" required>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Visit Date *</label>
                                <input type="date" id="visitDate" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500" min="${new Date().toISOString().split('T')[0]}" required>
                            </div>
                        </div>

                        <!-- Price Calculation -->
                        <div class="bg-gray-50 rounded-lg p-4">
                            <div class="flex justify-between items-center mb-2">
                                <span>Price per person:</span>
                                <span class="font-semibold">₹${farm.price.toLocaleString()}</span>
                            </div>
                            <div class="flex justify-between items-center mb-2">
                                <span>Number of visitors:</span>
                                <span id="visitorsDisplay">1 person</span>
                            </div>
                            <div class="flex justify-between items-center mb-2">
                                <span>Subtotal:</span>
                                <span id="visitSubtotal" class="font-semibold">₹${farm.price.toLocaleString()}</span>
                            </div>
                            <div class="border-t pt-2 mb-2">
                                <div class="flex justify-between items-center font-bold text-lg">
                                    <span>Total Amount:</span>
                                    <span id="visitTotal" class="text-green-600">₹${farm.price.toLocaleString()}</span>
                                </div>
                            </div>
                            
                            <!-- Coin Payment Section -->
                            <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-3 mt-3">
                                <div class="flex items-center space-x-2 mb-2">
                                    <span class="text-xl">🪙</span>
                                    <h5 class="font-semibold text-yellow-800">Use Your Coins</h5>
                                </div>
                                <div class="space-y-2 text-sm">
                                    <div class="flex justify-between items-center">
                                        <span>Available Coins:</span>
                                        <span class="font-semibold text-yellow-800" id="visitAvailableCoins">1,250 coins</span>
                                    </div>
                                    <div class="flex justify-between items-center">
                                        <span>Coins Used:</span>
                                        <span class="font-semibold text-green-600" id="visitCoinsUsed">0 coins (₹0)</span>
                                    </div>
                                    <div class="flex justify-between items-center">
                                        <span>Remaining Coins:</span>
                                        <span class="font-semibold text-blue-600" id="visitRemainingCoins">1,250 coins</span>
                                    </div>
                                    <div class="flex justify-between items-center border-t pt-2">
                                        <span class="font-semibold">Cash Payment:</span>
                                        <span class="font-bold text-red-600" id="visitCashPayment">₹${farm.price.toLocaleString()}</span>
                                    </div>
                                </div>
                                <div class="mt-3">
                                    <label class="flex items-center space-x-2">
                                        <input type="checkbox" id="useCoinsForVisit" class="text-yellow-600" onchange="toggleVisitCoinUsage(${farmId})">
                                        <span class="text-sm text-yellow-800">Use maximum available coins for this booking</span>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- Payment Options -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-3">Payment Method</label>
                            <div class="space-y-2">
                                <label class="flex items-center space-x-3 p-3 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50">
                                    <input type="radio" name="visitPaymentMethod" value="upi" class="text-green-600" checked>
                                    <div>
                                        <div class="font-semibold">📱 UPI Payment</div>
                                        <div class="text-xs text-gray-600">Pay instantly via UPI</div>
                                    </div>
                                </label>
                                <label class="flex items-center space-x-3 p-3 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50">
                                    <input type="radio" name="visitPaymentMethod" value="card" class="text-green-600">
                                    <div>
                                        <div class="font-semibold">💳 Card Payment</div>
                                        <div class="text-xs text-gray-600">Credit/Debit card payment</div>
                                    </div>
                                </label>
                                <label class="flex items-center space-x-3 p-3 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50">
                                    <input type="radio" name="visitPaymentMethod" value="bank" class="text-green-600">
                                    <div>
                                        <div class="font-semibold">🏦 Bank Transfer</div>
                                        <div class="text-xs text-gray-600">Direct bank account transfer</div>
                                    </div>
                                </label>
                            </div>
                        </div>

                        <!-- Special Requests -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Special Requests (Optional)</label>
                            <textarea id="specialRequests" rows="2" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500" placeholder="Any special requirements or dietary restrictions..."></textarea>
                        </div>

                        <!-- Action Buttons -->
                        <div class="flex space-x-3">
                            <button onclick="confirmVisitBooking(${farmId})" class="flex-1 bg-green-600 text-white py-3 rounded-lg hover:bg-green-700 font-semibold">
                                Book Visit & Pay
                            </button>
                        </div>
                    </div>
                </div>
            `;

            document.getElementById('bookVisitContent').innerHTML = content;
            document.getElementById('bookVisitModal').classList.remove('hidden');
        }

        function closeBookVisit() {
            document.getElementById('bookVisitModal').classList.add('hidden');
        }

        function updateVisitPrice(farmId) {
            const farm = farmVisits[farmId];
            const numVisitors = parseInt(document.getElementById('numVisitors').value) || 1;
            const total = farm.price * numVisitors;

            document.getElementById('visitorsDisplay').textContent = `${numVisitors} ${numVisitors === 1 ? 'person' : 'persons'}`;
            document.getElementById('visitSubtotal').textContent = `₹${total.toLocaleString()}`;
            document.getElementById('visitTotal').textContent = `₹${total.toLocaleString()}`;
            
            // Update coin calculations
            updateVisitCoinCalculations(total);
        }

        function updateVisitCoinCalculations(totalAmount) {
            const currentCoins = parseInt(document.getElementById('coinBalance').textContent.replace(',', ''));
            const useCoinsCheckbox = document.getElementById('useCoinsForVisit');
            
            // Update available coins display
            document.getElementById('visitAvailableCoins').textContent = `${currentCoins.toLocaleString()} coins`;
            
            if (useCoinsCheckbox && useCoinsCheckbox.checked) {
                // 1 coin = ₹1 conversion rate
                const coinsToUse = Math.min(currentCoins, totalAmount);
                const remainingCoins = currentCoins - coinsToUse;
                const cashPayment = totalAmount - coinsToUse;
                
                document.getElementById('visitCoinsUsed').textContent = `${coinsToUse.toLocaleString()} coins (₹${coinsToUse.toLocaleString()})`;
                document.getElementById('visitRemainingCoins').textContent = `${remainingCoins.toLocaleString()} coins`;
                document.getElementById('visitCashPayment').textContent = `₹${cashPayment.toLocaleString()}`;
            } else {
                document.getElementById('visitCoinsUsed').textContent = `0 coins (₹0)`;
                document.getElementById('visitRemainingCoins').textContent = `${currentCoins.toLocaleString()} coins`;
                document.getElementById('visitCashPayment').textContent = `₹${totalAmount.toLocaleString()}`;
            }
        }

        function toggleVisitCoinUsage(farmId) {
            const farm = farmVisits[farmId];
            const numVisitors = parseInt(document.getElementById('numVisitors').value) || 1;
            const total = farm.price * numVisitors;
            
            updateVisitCoinCalculations(total);
        }

        function confirmVisitBooking(farmId) {
            const visitorName = document.getElementById('visitorName').value;
            const visitorPhone = document.getElementById('visitorPhone').value;
            const numVisitors = parseInt(document.getElementById('numVisitors').value) || 1;
            const visitDate = document.getElementById('visitDate').value;
            const paymentMethod = document.querySelector('input[name="visitPaymentMethod"]:checked').value;
            const useCoinsCheckbox = document.getElementById('useCoinsForVisit');

            if (!visitorName.trim() || !visitorPhone.trim() || !visitDate) {
                alert('Please fill in all required fields.');
                return;
            }

            const farm = farmVisits[farmId];
            const total = farm.price * numVisitors;
            const bookingId = 'FV-' + new Date().getFullYear() + '-' + String(Math.floor(Math.random() * 1000)).padStart(3, '0');

            let bookingMessage = `🎫 Farm Visit Booked Successfully!

Booking Details:
• Booking ID: ${bookingId}
• Farm: ${farm.name}
• Visitor: ${visitorName}
• Date: ${new Date(visitDate).toLocaleDateString()}
• Visitors: ${numVisitors} ${numVisitors === 1 ? 'person' : 'persons'}
• Payment: ${paymentMethod.toUpperCase()}`;

            // Handle coin usage
            if (useCoinsCheckbox && useCoinsCheckbox.checked) {
                const currentCoins = parseInt(document.getElementById('coinBalance').textContent.replace(',', ''));
                const coinsUsed = Math.min(currentCoins, total);
                const cashPayment = total - coinsUsed;
                const remainingCoins = currentCoins - coinsUsed;

                bookingMessage += `
• Coins Used: ${coinsUsed.toLocaleString()} coins (₹${coinsUsed.toLocaleString()})
• Cash Payment: ₹${cashPayment.toLocaleString()}
• Remaining Coins: ${remainingCoins.toLocaleString()} coins`;

                // Update coin balance
                document.getElementById('coinBalance').textContent = remainingCoins.toLocaleString();
            } else {
                bookingMessage += `
• Total Amount: ₹${total.toLocaleString()}`;
            }

            // Generate tickets
            const tickets = [];
            for (let i = 1; i <= numVisitors; i++) {
                tickets.push(`
🎫 TICKET ${i}/${numVisitors}
Farm: ${farm.name}
Date: ${new Date(visitDate).toLocaleDateString()}
Visitor: ${visitorName}
Booking ID: ${bookingId}
Valid for 1 person only`);
            }

            bookingMessage += `

📧 Tickets have been generated:
${tickets.join('\n\n')}

📱 Contact farm: Show this booking confirmation
⏰ Arrive 15 minutes before visit time
🎁 Includes: ${farm.includes}

Thank you for booking with Smart Farm! 🌱`;

            alert(bookingMessage);
            closeBookVisit();
        }

        function handleFarmImages(event) {
            const files = event.target.files;
            const container = document.getElementById('farmImagePreviewContainer');
            const grid = document.getElementById('farmImagePreviewGrid');

            if (files.length > 0) {
                container.classList.remove('hidden');
                grid.innerHTML = '';

                Array.from(files).slice(0, 8).forEach((file, index) => {
                    const div = document.createElement('div');
                    div.className = 'relative bg-gray-100 rounded-lg p-3 text-center';
                    div.innerHTML = `
                        <span class="text-2xl">📷</span>
                        <p class="text-xs text-gray-600 mt-1">${file.name.substring(0, 15)}...</p>
                        <button type="button" onclick="removeFarmImage(${index})" class="absolute top-1 right-1 bg-red-500 text-white rounded-full w-5 h-5 text-xs">×</button>
                    `;
                    grid.appendChild(div);
                });
            }
        }

        function removeFarmImage(index) {
            alert(`Image ${index + 1} removed`);
        }

        function submitFarmListing() {
            const farmerName = document.getElementById('farmerName').value;
            const farmName = document.getElementById('farmName').value;
            const farmAddress = document.getElementById('farmAddress').value;
            const landArea = document.getElementById('landArea').value;
            const areaUnit = document.getElementById('areaUnit').value;
            const farmType = document.getElementById('farmType').value;
            const farmDescription = document.getElementById('farmDescription').value;
            const visitPrice = document.getElementById('visitPrice').value;
            const farmContactNumber = document.getElementById('farmContactNumber').value;

            if (!farmerName || !farmName || !farmAddress || !landArea || !areaUnit || !farmType || !farmDescription || !visitPrice || !farmContactNumber) {
                alert('Please fill in all required fields.');
                return;
            }

            alert(`🚜 Farm Listed Successfully!

Farm Details:
• Farmer: ${farmerName}
• Farm: ${farmName}
• Area: ${landArea} ${areaUnit}
• Type: ${farmType}
• Price: ₹${visitPrice}/person

You earned 50 coins for listing your farm!
Your farm is under review and will be live within 24-48 hours.

Visitors can now discover and book visits to your farm. You'll earn 10% commission on each booking plus bonus coins for positive reviews!`);
            
            updateCoins(50);
            closeListMyFarm();
        }

        function saveFarmDraft() {
            alert('Farm listing saved as draft! You can continue editing later.');
        }

        function resetFarmForm() {
            document.getElementById('listFarmForm').reset();
            document.getElementById('farmImagePreviewContainer').classList.add('hidden');
        }

        // Marketplace Functions
        let cart = [];
        let products = {
            1: { name: 'Premium Wheat Seeds', price: 2250, unit: 'bag', image: '🌾', category: 'seeds', description: 'High yield variety - 50kg bag' },
            2: { name: 'Hybrid Corn Seeds', price: 1800, unit: 'bag', image: '🌽', category: 'seeds', description: 'Disease resistant - 25kg bag' },
            3: { name: 'Basmati Rice Seeds', price: 3200, unit: 'bag', image: '🌾', category: 'seeds', description: 'Premium quality - 30kg bag' },
            4: { name: 'Organic Fertilizer NPK', price: 850, unit: 'bag', image: '🧪', category: 'fertilizers', description: '10:26:26 - 25kg bag' },
            5: { name: 'Urea Fertilizer', price: 1200, unit: 'bag', image: '🌱', category: 'fertilizers', description: '46% Nitrogen - 50kg bag' },
            6: { name: 'Vermicompost', price: 600, unit: 'bag', image: '🍃', category: 'fertilizers', description: 'Organic compost - 40kg bag' }
        };

        function openSellProduct() {
            document.getElementById('sellProductModal').classList.remove('hidden');
        }

        function closeSellProduct() {
            document.getElementById('sellProductModal').classList.add('hidden');
            resetSellForm();
        }

        function openMyOrders() {
            document.getElementById('myOrdersModal').classList.remove('hidden');
        }

        function closeMyOrders() {
            document.getElementById('myOrdersModal').classList.add('hidden');
        }

        function openCart() {
            document.getElementById('cartModal').classList.remove('hidden');
            updateCartDisplay();
        }

        function closeCart() {
            document.getElementById('cartModal').classList.add('hidden');
        }

        function openBuyNow(productId) {
            const product = products[productId];
            if (!product) return;

            const content = `
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Product Image -->
                    <div class="bg-gray-100 rounded-lg p-8 text-center">
                        <span class="text-8xl">${product.image}</span>
                        <h4 class="text-xl font-semibold mt-4">${product.name}</h4>
                        <p class="text-gray-600 mt-2">${product.description}</p>
                    </div>

                    <!-- Purchase Form -->
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Quantity Needed</label>
                            <input type="number" id="buyQuantity" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500" value="1" min="1" onchange="updateBuyPrice(${productId})">
                        </div>

                        <div class="bg-gray-50 rounded-lg p-4">
                            <div class="flex justify-between items-center mb-2">
                                <span>Price per ${product.unit}:</span>
                                <span class="font-semibold">₹${product.price.toLocaleString()}</span>
                            </div>
                            <div class="flex justify-between items-center mb-2">
                                <span>Quantity:</span>
                                <span id="buyQuantityDisplay">1 ${product.unit}</span>
                            </div>
                            <div class="flex justify-between items-center mb-2">
                                <span>Subtotal:</span>
                                <span id="buySubtotal" class="font-semibold">₹${product.price.toLocaleString()}</span>
                            </div>
                            <div class="flex justify-between items-center mb-2">
                                <span>Shipping:</span>
                                <span id="buyShipping" class="font-semibold">₹100</span>
                            </div>
                            <div class="border-t pt-2 mb-2">
                                <div class="flex justify-between items-center font-bold text-lg">
                                    <span>Total:</span>
                                    <span id="buyTotal" class="text-green-600">₹${(product.price + 100).toLocaleString()}</span>
                                </div>
                            </div>
                            
                            <!-- Coin Payment Section -->
                            <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-3 mt-3">
                                <div class="flex items-center space-x-2 mb-2">
                                    <span class="text-xl">🪙</span>
                                    <h5 class="font-semibold text-yellow-800">Use Your Coins</h5>
                                </div>
                                <div class="space-y-2 text-sm">
                                    <div class="flex justify-between items-center">
                                        <span>Available Coins:</span>
                                        <span class="font-semibold text-yellow-800" id="availableCoins">1,250 coins</span>
                                    </div>
                                    <div class="flex justify-between items-center">
                                        <span>Coins Used:</span>
                                        <span class="font-semibold text-green-600" id="coinsUsed">0 coins (₹0)</span>
                                    </div>
                                    <div class="flex justify-between items-center">
                                        <span>Remaining Coins:</span>
                                        <span class="font-semibold text-blue-600" id="remainingCoins">1,250 coins</span>
                                    </div>
                                    <div class="flex justify-between items-center border-t pt-2">
                                        <span class="font-semibold">Cash Payment:</span>
                                        <span class="font-bold text-red-600" id="cashPayment">₹${(product.price + 100).toLocaleString()}</span>
                                    </div>
                                </div>
                                <div class="mt-3">
                                    <label class="flex items-center space-x-2">
                                        <input type="checkbox" id="useCoins" class="text-yellow-600" onchange="toggleCoinUsage(${productId})">
                                        <span class="text-sm text-yellow-800">Use maximum available coins for this purchase</span>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- Delivery Address -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Delivery Address</label>
                            <textarea id="deliveryAddress" rows="3" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500" placeholder="Enter your complete delivery address..."></textarea>
                        </div>

                        <!-- Payment Options -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-3">Payment Method</label>
                            <div class="space-y-2">
                                <label class="flex items-center space-x-3 p-3 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50">
                                    <input type="radio" name="paymentMethod" value="cod" class="text-green-600" checked>
                                    <div>
                                        <div class="font-semibold">💵 Cash on Delivery</div>
                                        <div class="text-xs text-gray-600">Pay when you receive the product</div>
                                    </div>
                                </label>
                                <label class="flex items-center space-x-3 p-3 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50">
                                    <input type="radio" name="paymentMethod" value="upi" class="text-green-600">
                                    <div>
                                        <div class="font-semibold">📱 UPI Payment</div>
                                        <div class="text-xs text-gray-600">Pay instantly via UPI</div>
                                    </div>
                                </label>
                                <label class="flex items-center space-x-3 p-3 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50">
                                    <input type="radio" name="paymentMethod" value="bank" class="text-green-600">
                                    <div>
                                        <div class="font-semibold">🏦 Bank Transfer</div>
                                        <div class="text-xs text-gray-600">Direct bank account transfer</div>
                                    </div>
                                </label>
                            </div>
                        </div>

                        <!-- Action Buttons -->
                        <div class="flex space-x-3">
                            <button onclick="confirmPurchase(${productId})" class="flex-1 bg-green-600 text-white py-3 rounded-lg hover:bg-green-700 font-semibold">
                                Place Order
                            </button>
                            <button onclick="addToCartFromBuy(${productId})" class="px-6 py-3 border border-green-600 text-green-600 rounded-lg hover:bg-green-50">
                                Add to Cart
                            </button>
                        </div>
                    </div>
                </div>
            `;

            document.getElementById('buyNowContent').innerHTML = content;
            document.getElementById('buyNowModal').classList.remove('hidden');
        }

        function closeBuyNow() {
            document.getElementById('buyNowModal').classList.add('hidden');
        }

        function updateBuyPrice(productId) {
            const product = products[productId];
            const quantity = parseInt(document.getElementById('buyQuantity').value) || 1;
            const subtotal = product.price * quantity;
            const shipping = quantity > 10 ? 200 : 100; // Higher shipping for large orders
            const total = subtotal + shipping;

            document.getElementById('buyQuantityDisplay').textContent = `${quantity} ${product.unit}${quantity > 1 ? 's' : ''}`;
            document.getElementById('buySubtotal').textContent = `₹${subtotal.toLocaleString()}`;
            document.getElementById('buyShipping').textContent = `₹${shipping}`;
            document.getElementById('buyTotal').textContent = `₹${total.toLocaleString()}`;
            
            // Update coin calculations
            updateCoinCalculations(total);
        }

        function updateCoinCalculations(totalAmount) {
            const currentCoins = parseInt(document.getElementById('coinBalance').textContent.replace(',', ''));
            const useCoinsCheckbox = document.getElementById('useCoins');
            
            // Update available coins display
            document.getElementById('availableCoins').textContent = `${currentCoins.toLocaleString()} coins`;
            
            if (useCoinsCheckbox && useCoinsCheckbox.checked) {
                // 1 coin = ₹1 conversion rate
                const coinsToUse = Math.min(currentCoins, totalAmount);
                const remainingCoins = currentCoins - coinsToUse;
                const cashPayment = totalAmount - coinsToUse;
                
                document.getElementById('coinsUsed').textContent = `${coinsToUse.toLocaleString()} coins (₹${coinsToUse.toLocaleString()})`;
                document.getElementById('remainingCoins').textContent = `${remainingCoins.toLocaleString()} coins`;
                document.getElementById('cashPayment').textContent = `₹${cashPayment.toLocaleString()}`;
            } else {
                document.getElementById('coinsUsed').textContent = `0 coins (₹0)`;
                document.getElementById('remainingCoins').textContent = `${currentCoins.toLocaleString()} coins`;
                document.getElementById('cashPayment').textContent = `₹${totalAmount.toLocaleString()}`;
            }
        }

        function toggleCoinUsage(productId) {
            const product = products[productId];
            const quantity = parseInt(document.getElementById('buyQuantity').value) || 1;
            const subtotal = product.price * quantity;
            const shipping = quantity > 10 ? 200 : 100;
            const total = subtotal + shipping;
            
            updateCoinCalculations(total);
        }

        function confirmPurchase(productId) {
            const quantity = parseInt(document.getElementById('buyQuantity').value) || 1;
            const address = document.getElementById('deliveryAddress').value;
            const paymentMethod = document.querySelector('input[name="paymentMethod"]:checked').value;
            const useCoinsCheckbox = document.getElementById('useCoins');

            if (!address.trim()) {
                alert('Please enter your delivery address.');
                return;
            }

            let orderMessage = `Order placed successfully! 
Product: ${products[productId].name}
Quantity: ${quantity}
Payment: ${paymentMethod.toUpperCase()}`;

            // Handle coin usage
            if (useCoinsCheckbox && useCoinsCheckbox.checked) {
                const currentCoins = parseInt(document.getElementById('coinBalance').textContent.replace(',', ''));
                const product = products[productId];
                const subtotal = product.price * quantity;
                const shipping = quantity > 10 ? 200 : 100;
                const total = subtotal + shipping;
                const coinsUsed = Math.min(currentCoins, total);
                const cashPayment = total - coinsUsed;
                const remainingCoins = currentCoins - coinsUsed;

                orderMessage += `
Coins Used: ${coinsUsed.toLocaleString()} coins (₹${coinsUsed.toLocaleString()})
Cash Payment: ₹${cashPayment.toLocaleString()}
Remaining Coins: ${remainingCoins.toLocaleString()} coins`;

                // Update coin balance
                document.getElementById('coinBalance').textContent = remainingCoins.toLocaleString();
            }

            orderMessage += `
Expected delivery: 3-5 business days`;

            alert(orderMessage);
            closeBuyNow();
        }

        function addToCartFromBuy(productId) {
            const quantity = parseInt(document.getElementById('buyQuantity').value) || 1;
            addToCart(productId, quantity);
            closeBuyNow();
        }

        function addToCart(productId, quantity = 1) {
            const existingItem = cart.find(item => item.id === productId);
            
            if (existingItem) {
                existingItem.quantity += quantity;
            } else {
                cart.push({
                    id: productId,
                    ...products[productId],
                    quantity: quantity
                });
            }

            updateCartCount();
            alert(`${products[productId].name} added to cart!`);
        }

        function updateCartCount() {
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            document.getElementById('cartCount').textContent = totalItems;
        }

        function updateCartDisplay() {
            const cartItems = document.getElementById('cartItems');
            const cartEmpty = document.getElementById('cartEmpty');
            const cartSummary = document.getElementById('cartSummary');

            if (cart.length === 0) {
                cartItems.innerHTML = '';
                cartEmpty.classList.remove('hidden');
                cartSummary.classList.add('hidden');
                return;
            }

            cartEmpty.classList.add('hidden');
            cartSummary.classList.remove('hidden');

            cartItems.innerHTML = cart.map(item => `
                <div class="flex items-center space-x-4 p-4 border rounded-lg">
                    <span class="text-3xl">${item.image}</span>
                    <div class="flex-1">
                        <h5 class="font-semibold">${item.name}</h5>
                        <p class="text-sm text-gray-600">${item.description}</p>
                        <div class="flex items-center space-x-2 mt-2">
                            <button onclick="updateCartQuantity(${item.id}, -1)" class="bg-gray-200 text-gray-800 px-2 py-1 rounded">-</button>
                            <span class="px-3">${item.quantity}</span>
                            <button onclick="updateCartQuantity(${item.id}, 1)" class="bg-gray-200 text-gray-800 px-2 py-1 rounded">+</button>
                        </div>
                    </div>
                    <div class="text-right">
                        <div class="font-semibold">₹${(item.price * item.quantity).toLocaleString()}</div>
                        <button onclick="removeFromCart(${item.id})" class="text-red-600 text-sm hover:underline">Remove</button>
                    </div>
                </div>
            `).join('');

            updateCartSummary();
        }

        function updateCartQuantity(productId, change) {
            const item = cart.find(item => item.id === productId);
            if (item) {
                item.quantity += change;
                if (item.quantity <= 0) {
                    removeFromCart(productId);
                } else {
                    updateCartDisplay();
                    updateCartCount();
                }
            }
        }

        function removeFromCart(productId) {
            cart = cart.filter(item => item.id !== productId);
            updateCartDisplay();
            updateCartCount();
        }

        function updateCartSummary() {
            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const shipping = 100;
            const total = subtotal + shipping;

            document.getElementById('cartSubtotal').textContent = `₹${subtotal.toLocaleString()}`;
            document.getElementById('cartTotal').textContent = `₹${total.toLocaleString()}`;
        }

        function proceedToCheckout() {
            alert('Proceeding to checkout... This would redirect to payment gateway in a real application.');
        }

        function filterProducts(category) {
            const products = document.querySelectorAll('.product-item');
            const filterBtns = document.querySelectorAll('.filter-btn');

            // Update active filter button
            filterBtns.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            if (category === 'all') {
                products.forEach(product => product.style.display = 'block');
            } else if (category === 'cart') {
                products.forEach(product => {
                    const productId = parseInt(product.dataset.id);
                    const inCart = cart.some(item => item.id === productId);
                    product.style.display = inCart ? 'block' : 'none';
                });
            } else {
                products.forEach(product => {
                    const productCategory = product.dataset.category;
                    product.style.display = productCategory === category ? 'block' : 'none';
                });
            }
        }

        function handleProductImages(event) {
            const files = event.target.files;
            const container = document.getElementById('imagePreviewContainer');
            const grid = document.getElementById('imagePreviewGrid');

            if (files.length > 0) {
                container.classList.remove('hidden');
                grid.innerHTML = '';

                Array.from(files).slice(0, 5).forEach((file, index) => {
                    const div = document.createElement('div');
                    div.className = 'relative bg-gray-100 rounded-lg p-4 text-center';
                    div.innerHTML = `
                        <span class="text-2xl">📷</span>
                        <p class="text-xs text-gray-600 mt-1">${file.name}</p>
                        <button type="button" onclick="removeImage(${index})" class="absolute top-1 right-1 bg-red-500 text-white rounded-full w-5 h-5 text-xs">×</button>
                    `;
                    grid.appendChild(div);
                });
            }
        }

        function removeImage(index) {
            // In a real application, you would remove the file from the input
            alert(`Image ${index + 1} removed`);
        }

        function submitProduct() {
            const name = document.getElementById('productName').value;
            const category = document.getElementById('productCategory').value;
            const description = document.getElementById('productDescription').value;
            const quantity = document.getElementById('productQuantity').value;
            const unit = document.getElementById('productUnit').value;
            const price = document.getElementById('productPrice').value;
            const state = document.getElementById('productState').value;
            const city = document.getElementById('productCity').value;
            const contact = document.getElementById('contactNumber').value;

            if (!name || !category || !description || !quantity || !unit || !price || !state || !city || !contact) {
                alert('Please fill in all required fields.');
                return;
            }

            alert(`Product listed successfully! 
You earned 10 coins for listing.
Your product is under review and will be live within 24 hours.`);
            
            updateCoins(10);
            closeSellProduct();
        }

        function saveProductDraft() {
            alert('Product saved as draft! You can continue editing later.');
        }

        function resetSellForm() {
            document.getElementById('sellProductForm').reset();
            document.getElementById('imagePreviewContainer').classList.add('hidden');
        }

        // Utility Functions
        function updateCoins(amount) {
            const coinBalance = document.getElementById('coinBalance');
            const currentCoins = parseInt(coinBalance.textContent.replace(',', ''));
            const newCoins = currentCoins + amount;
            coinBalance.textContent = newCoins.toLocaleString();
        }

        // Event Listeners
        document.getElementById('blogEditor').addEventListener('input', updateWordCount);

        // Close modals when clicking outside
        document.getElementById('videoUploadModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeVideoUpload();
            }
        });

        document.getElementById('blogEditorModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeBlogEditor();
            }
        });

        document.getElementById('sellProductModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeSellProduct();
            }
        });

        document.getElementById('myOrdersModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeMyOrders();
            }
        });

        document.getElementById('cartModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeCart();
            }
        });

        document.getElementById('buyNowModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeBuyNow();
            }
        });

        document.getElementById('listMyFarmModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeListMyFarm();
            }
        });

        document.getElementById('myFarmBookingsModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeMyBookings();
            }
        });

        document.getElementById('bookVisitModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeBookVisit();
            }
        });

        // Crop recommendation system
        document.getElementById('cropSelect').addEventListener('change', function() {
            const selectedCrop = this.value;
            const recommendationDiv = document.getElementById('cropRecommendation');
            const modificationsDiv = document.getElementById('modifications');

            if (selectedCrop) {
                recommendationDiv.classList.remove('hidden');
                
                const cropData = {
                    wheat: {
                        modifications: [
                            { type: 'pH', text: 'Increase pH to 6.0-7.0 by adding lime (2-3 kg per acre)', color: 'yellow' },
                            { type: 'phosphorus', text: 'Add phosphorus fertilizer (DAP 50kg/acre)', color: 'orange' },
                            { type: 'organic', text: 'Increase organic matter with compost (500kg/acre)', color: 'green' }
                        ]
                    },
                    rice: {
                        modifications: [
                            { type: 'moisture', text: 'Maintain waterlogged conditions (2-5cm water)', color: 'blue' },
                            { type: 'nitrogen', text: 'Apply urea in split doses (120kg/acre)', color: 'red' },
                            { type: 'pathogen', text: 'Treat soil with bio-fungicide before transplanting', color: 'red' }
                        ]
                    },
                    corn: {
                        modifications: [
                            { type: 'nitrogen', text: 'Apply nitrogen fertilizer (150kg urea/acre)', color: 'red' },
                            { type: 'potassium', text: 'Maintain current potassium levels', color: 'green' },
                            { type: 'drainage', text: 'Ensure proper drainage to prevent waterlogging', color: 'blue' }
                        ]
                    },
                    potato: {
                        modifications: [
                            { type: 'pH', text: 'Maintain slightly acidic pH (5.5-6.5)', color: 'green' },
                            { type: 'organic', text: 'Add well-decomposed manure (1000kg/acre)', color: 'green' },
                            { type: 'pathogen', text: 'Apply neem cake to reduce pathogen load', color: 'yellow' }
                        ]
                    },
                    tomato: {
                        modifications: [
                            { type: 'calcium', text: 'Maintain current calcium levels for fruit quality', color: 'green' },
                            { type: 'phosphorus', text: 'Increase phosphorus for flowering (TSP 40kg/acre)', color: 'orange' },
                            { type: 'organic', text: 'Add vermicompost (300kg/acre)', color: 'green' }
                        ]
                    },
                    cotton: {
                        modifications: [
                            { type: 'potassium', text: 'Maintain high potassium for fiber quality', color: 'green' },
                            { type: 'boron', text: 'Apply boron fertilizer (1kg/acre)', color: 'purple' },
                            { type: 'drainage', text: 'Ensure good drainage and aeration', color: 'blue' }
                        ]
                    },
                    sugarcane: {
                        modifications: [
                            { type: 'nitrogen', text: 'Apply nitrogen in multiple splits (200kg/acre)', color: 'red' },
                            { type: 'moisture', text: 'Maintain consistent moisture levels', color: 'blue' },
                            { type: 'organic', text: 'Add press mud compost (2000kg/acre)', color: 'green' }
                        ]
                    }
                };

                const modifications = cropData[selectedCrop]?.modifications || [];
                modificationsDiv.innerHTML = modifications.map(mod => `
                    <div class="flex items-center space-x-3 p-2 bg-${mod.color}-50 rounded border-l-4 border-${mod.color}-400">
                        <span class="w-3 h-3 bg-${mod.color}-500 rounded-full"></span>
                        <span class="text-sm text-${mod.color}-800">${mod.text}</span>
                    </div>
                `).join('');
            } else {
                recommendationDiv.classList.add('hidden');
            }
        });

        // Simulate coin updates
        setInterval(() => {
            const coinBalance = document.getElementById('coinBalance');
            const currentCoins = parseInt(coinBalance.textContent.replace(',', ''));
            const newCoins = currentCoins + Math.floor(Math.random() * 10);
            coinBalance.textContent = newCoins.toLocaleString();
        }, 30000);

        // Simulate notification updates
        setInterval(() => {
            const badge = document.getElementById('notificationBadge');
            const currentCount = parseInt(badge.textContent.split(' ')[0]);
            if (Math.random() > 0.7) {
                badge.textContent = `${currentCount + 1} New`;
            }
        }, 45000);

        // ===== BACKEND INTEGRATION =====
        const API_BASE = 'http://localhost:5001';
        
        // Backend API Functions
        async function checkBackendHealth() {
            try {
                const response = await fetch(`${API_BASE}/api/health`);
                const data = await response.json();
                return data.status === 'healthy';
            } catch (error) {
                console.error('Backend not available:', error);
                return false;
            }
        }

        async function getCurrentWeatherFromAPI() {
            try {
                const lat = 28.6139; // Default to Delhi
                const lon = 77.2090;
                const response = await fetch(`${API_BASE}/api/weather/current?lat=${lat}&lon=${lon}`);
                const data = await response.json();
                
                if (data.success) {
                    return data.data.weather_data;
                }
                return null;
            } catch (error) {
                console.error('Weather API error:', error);
                return null;
            }
        }

        async function getCropRecommendationsFromAPI() {
            try {
                const payload = {
                    soil_data: {
                        ph: { value: 6.5, unit: 'pH' },
                        nitrogen: { value: 80, unit: 'mg/kg' },
                        phosphorus: { value: 25, unit: 'mg/kg' },
                        potassium: { value: 150, unit: 'mg/kg' }
                    },
                    weather_data: {
                        temperature: 25.5,
                        humidity: 65.2,
                        wind_speed: 3.2
                    },
                    user_preferences: {
                        preferred_categories: ['cereal', 'vegetable'],
                        preferred_seasons: ['winter', 'summer']
                    }
                };

                const response = await fetch(`${API_BASE}/api/crop-recommendations`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                
                const data = await response.json();
                return data.success ? data.data.recommendations : null;
            } catch (error) {
                console.error('Crop recommendations API error:', error);
                return null;
            }
        }

        async function getGovernmentSchemesFromAPI() {
            try {
                const payload = {
                    farmer_profile: {
                        land_holding_hectares: 2.5,
                        annual_income: 80000,
                        age: 35,
                        experience: 'intermediate',
                        location: { latitude: 28.6139, longitude: 77.2090 }
                    },
                    soil_data: {
                        ph: { value: 6.5, unit: 'pH' },
                        nitrogen: { value: 80, unit: 'mg/kg' },
                        phosphorus: { value: 25, unit: 'mg/kg' },
                        potassium: { value: 150, unit: 'mg/kg' }
                    },
                    crop_preferences: ['wheat', 'rice', 'tomato']
                };

                const response = await fetch(`${API_BASE}/api/government-schemes`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                
                const data = await response.json();
                return data.success ? data.data.recommendations : null;
            } catch (error) {
                console.error('Government schemes API error:', error);
                return null;
            }
        }

        async function generateFarmingPlanFromAPI(cropName) {
            try {
                const payload = {
                    crop_name: cropName,
                    soil_data: {
                        ph: { value: 6.5, unit: 'pH' },
                        nitrogen: { value: 80, unit: 'mg/kg' },
                        phosphorus: { value: 25, unit: 'mg/kg' },
                        potassium: { value: 150, unit: 'mg/kg' }
                    },
                    weather_data: {
                        temperature: 25.5,
                        humidity: 65.2,
                        wind_speed: 3.2
                    },
                    farm_size: 2.0,
                    farmer_experience: 'intermediate'
                };

                const response = await fetch(`${API_BASE}/api/farming-plan`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                
                const data = await response.json();
                return data.success ? data.data : null;
            } catch (error) {
                console.error('Farming plan API error:', error);
                return null;
            }
        }

        // Enhanced Soil Analysis Functions
        async function loadRealTimeWeather() {
            const weatherData = await getCurrentWeatherFromAPI();
            if (weatherData) {
                // Update weather display with real data
                const weatherElements = document.querySelectorAll('.bg-blue-50 .text-center');
                if (weatherElements.length >= 3) {
                    weatherElements[0].querySelector('.font-bold').textContent = `${weatherData.temperature}°C`;
                    weatherElements[1].querySelector('.font-bold').textContent = `${weatherData.humidity}%`;
                    weatherElements[2].querySelector('.font-bold').textContent = `${weatherData.wind_speed} m/s`;
                }
            }
        }

        async function loadRealCropRecommendations() {
            const recommendations = await getCropRecommendationsFromAPI();
            if (recommendations && recommendations.length > 0) {
                // Update crop recommendations with real data
                const cropSelect = document.getElementById('cropSelect');
                if (cropSelect) {
                    // Add real recommendations to the dropdown
                    recommendations.slice(0, 5).forEach((rec, index) => {
                        const option = document.createElement('option');
                        option.value = rec.crop_name.toLowerCase();
                        option.textContent = `${rec.crop_name} (Score: ${rec.score})`;
                        option.dataset.score = rec.score;
                        option.dataset.suitability = rec.suitability;
                        cropSelect.appendChild(option);
                    });
                }
            }
        }

        async function loadGovernmentSchemes() {
            const schemes = await getGovernmentSchemesFromAPI();
            if (schemes && schemes.length > 0) {
                // Display government schemes in the UI
                const schemesContainer = document.querySelector('#government-schemes .grid');
                if (schemesContainer) {
                    schemes.slice(0, 3).forEach(scheme => {
                        const schemeCard = document.createElement('div');
                        schemeCard.className = 'bg-white rounded-lg p-4 border border-gray-200';
                        schemeCard.innerHTML = `
                            <h4 class="font-semibold text-gray-800 mb-2">${scheme.scheme_name}</h4>
                            <p class="text-sm text-gray-600 mb-3">${scheme.description}</p>
                            <div class="flex justify-between items-center">
                                <span class="text-green-600 font-semibold">₹${scheme.benefit_amount.toLocaleString()}</span>
                                <span class="bg-${scheme.priority_level === 'high' ? 'red' : scheme.priority_level === 'medium' ? 'yellow' : 'green'}-100 text-${scheme.priority_level === 'high' ? 'red' : scheme.priority_level === 'medium' ? 'yellow' : 'green'}-800 px-2 py-1 rounded text-xs">${scheme.priority_level}</span>
                            </div>
                        `;
                        schemesContainer.appendChild(schemeCard);
                    });
                }
            }
        }

        // Enhanced crop selection with backend integration
        document.getElementById('cropSelect')?.addEventListener('change', async function() {
            const selectedCrop = this.value;
            if (selectedCrop) {
                // Show loading state
                const recommendationDiv = document.getElementById('cropRecommendation');
                const modificationsDiv = document.getElementById('modifications');
                
                if (recommendationDiv) {
                    recommendationDiv.classList.remove('hidden');
                    modificationsDiv.innerHTML = '<div class="text-center py-4"><div class="spinner"></div><p>Generating recommendations...</p></div>';
                }

                // Get real farming plan from backend
                const farmingPlan = await generateFarmingPlanFromAPI(selectedCrop);
                
                if (farmingPlan) {
                    // Display real farming plan data
                    modificationsDiv.innerHTML = `
                        <div class="space-y-3">
                            <div class="bg-green-50 border-l-4 border-green-400 p-3">
                                <h5 class="font-semibold text-green-800">Farming Plan Generated!</h5>
                                <p class="text-sm text-green-700">Duration: ${farmingPlan.farming_plan.duration_days} days</p>
                                <p class="text-sm text-green-700">Total Cost: ₹${farmingPlan.farming_plan.total_cost_estimate.toLocaleString()}</p>
                                <p class="text-sm text-green-700">Expected Yield: ${farmingPlan.farming_plan.expected_yield}</p>
                            </div>
                            <div class="bg-blue-50 border-l-4 border-blue-400 p-3">
                                <h5 class="font-semibold text-blue-800">Key Phases:</h5>
                                <ul class="text-sm text-blue-700 space-y-1">
                                    ${Object.entries(farmingPlan.farming_plan.phases).slice(0, 3).map(([phase, data]) => 
                                        `<li>• ${phase.replace('_', ' ')}: ${data.duration_days} days</li>`
                                    ).join('')}
                                </ul>
                            </div>
                        </div>
                    `;
                } else {
                    // Fallback to static data
                    const cropData = {
                        wheat: {
                            modifications: [
                                { type: 'nitrogen', text: 'Apply nitrogen fertilizer (120kg/acre)', color: 'red' },
                                { type: 'phosphorus', text: 'Add phosphorus for root development (60kg/acre)', color: 'orange' },
                                { type: 'potassium', text: 'Maintain potassium levels (80kg/acre)', color: 'green' }
                            ]
                        },
                        rice: {
                            modifications: [
                                { type: 'water', text: 'Ensure proper water management', color: 'blue' },
                                { type: 'nitrogen', text: 'Split nitrogen application (150kg/acre)', color: 'red' },
                                { type: 'zinc', text: 'Apply zinc sulfate (25kg/acre)', color: 'purple' }
                            ]
                        }
                    };

                    const modifications = cropData[selectedCrop]?.modifications || [];
                    modificationsDiv.innerHTML = modifications.map(mod => `
                        <div class="flex items-center space-x-3 p-2 bg-${mod.color}-50 rounded border-l-4 border-${mod.color}-400">
                            <span class="w-3 h-3 bg-${mod.color}-500 rounded-full"></span>
                            <span class="text-sm text-${mod.color}-800">${mod.text}</span>
                        </div>
                    `).join('');
                }
            }
        });

        // Initialize backend integration when page loads
        document.addEventListener('DOMContentLoaded', async function() {
            // Check if backend is available
            const isBackendAvailable = await checkBackendHealth();
            
            if (isBackendAvailable) {
                console.log('✅ Backend API is available');
                
                // Load real-time data
                await loadRealTimeWeather();
                await loadRealCropRecommendations();
                await loadGovernmentSchemes();
                
                // Show backend status
                const statusIndicator = document.createElement('div');
                statusIndicator.className = 'fixed top-4 right-4 bg-green-500 text-white px-3 py-1 rounded-full text-sm z-50';
                statusIndicator.innerHTML = '🌐 API Connected';
                document.body.appendChild(statusIndicator);
                
                // Remove status after 3 seconds
                setTimeout(() => {
                    statusIndicator.remove();
                }, 3000);
            } else {
                console.log('⚠️ Backend API not available, using static data');
                
                // Show offline status
                const statusIndicator = document.createElement('div');
                statusIndicator.className = 'fixed top-4 right-4 bg-yellow-500 text-white px-3 py-1 rounded-full text-sm z-50';
                statusIndicator.innerHTML = '📡 Offline Mode';
                document.body.appendChild(statusIndicator);
                
                // Remove status after 3 seconds
                setTimeout(() => {
                    statusIndicator.remove();
                }, 3000);
            }
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9855e284025f58c9',t:'MTc1ODkyMjQ2MS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
